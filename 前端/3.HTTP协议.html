<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP体系 | 笔记</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/lihao-book/images/favicon.ico">
    <script src="/lihao-book/js/theme.js"></script>
    <link rel="manifest" href="/lihao-book/manifest.json">
    <link rel="apple-touch-icon" href="/lihao-book/images/logo.png">
    <link rel="mask-icon" href="/lihao-book/images/egg.svg" color="#d49400">
    <meta name="description" content="在这里记下我的所有笔记，方便查阅">
    <meta name="theme-color" content="#d49400">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="/lihao-book/images/logo.png">
    
    <link rel="preload" href="/lihao-book/assets/css/0.styles.df4cd3eb.css" as="style"><link rel="preload" href="/lihao-book/assets/js/app.53c2ddcc.js" as="script"><link rel="preload" href="/lihao-book/assets/js/2.763f5227.js" as="script"><link rel="preload" href="/lihao-book/assets/js/3.12312282.js" as="script"><link rel="preload" href="/lihao-book/assets/js/12.6d44314b.js" as="script"><link rel="prefetch" href="/lihao-book/assets/js/10.c29dd100.js"><link rel="prefetch" href="/lihao-book/assets/js/100.c29bfdab.js"><link rel="prefetch" href="/lihao-book/assets/js/101.8a0a2d76.js"><link rel="prefetch" href="/lihao-book/assets/js/102.b79876df.js"><link rel="prefetch" href="/lihao-book/assets/js/103.8ee10fed.js"><link rel="prefetch" href="/lihao-book/assets/js/104.3f282f8f.js"><link rel="prefetch" href="/lihao-book/assets/js/105.ac7a1192.js"><link rel="prefetch" href="/lihao-book/assets/js/106.4734ee15.js"><link rel="prefetch" href="/lihao-book/assets/js/107.054c69dc.js"><link rel="prefetch" href="/lihao-book/assets/js/108.384e2e3c.js"><link rel="prefetch" href="/lihao-book/assets/js/109.e5d54016.js"><link rel="prefetch" href="/lihao-book/assets/js/11.527cba7a.js"><link rel="prefetch" href="/lihao-book/assets/js/110.d7edb0c3.js"><link rel="prefetch" href="/lihao-book/assets/js/111.7343f504.js"><link rel="prefetch" href="/lihao-book/assets/js/112.4574f126.js"><link rel="prefetch" href="/lihao-book/assets/js/113.825db043.js"><link rel="prefetch" href="/lihao-book/assets/js/114.1cb3a5fc.js"><link rel="prefetch" href="/lihao-book/assets/js/115.1773945e.js"><link rel="prefetch" href="/lihao-book/assets/js/116.dd56c3e6.js"><link rel="prefetch" href="/lihao-book/assets/js/117.37547ccc.js"><link rel="prefetch" href="/lihao-book/assets/js/118.70176444.js"><link rel="prefetch" href="/lihao-book/assets/js/119.2b79fe04.js"><link rel="prefetch" href="/lihao-book/assets/js/120.772bdc2a.js"><link rel="prefetch" href="/lihao-book/assets/js/121.ef8a496f.js"><link rel="prefetch" href="/lihao-book/assets/js/122.b7c00719.js"><link rel="prefetch" href="/lihao-book/assets/js/123.616f5ae4.js"><link rel="prefetch" href="/lihao-book/assets/js/124.d049be5b.js"><link rel="prefetch" href="/lihao-book/assets/js/125.4a132df1.js"><link rel="prefetch" href="/lihao-book/assets/js/126.651bda99.js"><link rel="prefetch" href="/lihao-book/assets/js/127.35ad02ec.js"><link rel="prefetch" href="/lihao-book/assets/js/128.00534795.js"><link rel="prefetch" href="/lihao-book/assets/js/129.9ccdfd79.js"><link rel="prefetch" href="/lihao-book/assets/js/13.4951fcbc.js"><link rel="prefetch" href="/lihao-book/assets/js/130.2d06a017.js"><link rel="prefetch" href="/lihao-book/assets/js/131.d2d19c9d.js"><link rel="prefetch" href="/lihao-book/assets/js/132.b4ad942d.js"><link rel="prefetch" href="/lihao-book/assets/js/133.4db32f85.js"><link rel="prefetch" href="/lihao-book/assets/js/134.cfdcf44e.js"><link rel="prefetch" href="/lihao-book/assets/js/135.e0e62d52.js"><link rel="prefetch" href="/lihao-book/assets/js/136.509d63c3.js"><link rel="prefetch" href="/lihao-book/assets/js/137.6f950461.js"><link rel="prefetch" href="/lihao-book/assets/js/138.41d692d1.js"><link rel="prefetch" href="/lihao-book/assets/js/139.5ebee494.js"><link rel="prefetch" href="/lihao-book/assets/js/14.ac36ab7b.js"><link rel="prefetch" href="/lihao-book/assets/js/140.4141ec91.js"><link rel="prefetch" href="/lihao-book/assets/js/141.e86c0068.js"><link rel="prefetch" href="/lihao-book/assets/js/142.e480b6b3.js"><link rel="prefetch" href="/lihao-book/assets/js/143.fea956cd.js"><link rel="prefetch" href="/lihao-book/assets/js/144.ea3e3fbc.js"><link rel="prefetch" href="/lihao-book/assets/js/145.8c227b79.js"><link rel="prefetch" href="/lihao-book/assets/js/146.fa3daca8.js"><link rel="prefetch" href="/lihao-book/assets/js/147.982ce0f7.js"><link rel="prefetch" href="/lihao-book/assets/js/15.7d71e9e3.js"><link rel="prefetch" href="/lihao-book/assets/js/16.1ce3da1f.js"><link rel="prefetch" href="/lihao-book/assets/js/17.63628ec8.js"><link rel="prefetch" href="/lihao-book/assets/js/18.d4223894.js"><link rel="prefetch" href="/lihao-book/assets/js/19.658a8a3b.js"><link rel="prefetch" href="/lihao-book/assets/js/20.1e336789.js"><link rel="prefetch" href="/lihao-book/assets/js/21.1c33c72e.js"><link rel="prefetch" href="/lihao-book/assets/js/22.d2bea2ea.js"><link rel="prefetch" href="/lihao-book/assets/js/23.67483f4c.js"><link rel="prefetch" href="/lihao-book/assets/js/24.0f75e190.js"><link rel="prefetch" href="/lihao-book/assets/js/25.f75ac2ef.js"><link rel="prefetch" href="/lihao-book/assets/js/26.5a46eeb4.js"><link rel="prefetch" href="/lihao-book/assets/js/27.838996f0.js"><link rel="prefetch" href="/lihao-book/assets/js/28.7bc6be25.js"><link rel="prefetch" href="/lihao-book/assets/js/29.396974a2.js"><link rel="prefetch" href="/lihao-book/assets/js/30.de87062e.js"><link rel="prefetch" href="/lihao-book/assets/js/31.502fb09c.js"><link rel="prefetch" href="/lihao-book/assets/js/32.fabcd212.js"><link rel="prefetch" href="/lihao-book/assets/js/33.11f3c204.js"><link rel="prefetch" href="/lihao-book/assets/js/34.6c05740d.js"><link rel="prefetch" href="/lihao-book/assets/js/35.a7b05867.js"><link rel="prefetch" href="/lihao-book/assets/js/36.b1879c51.js"><link rel="prefetch" href="/lihao-book/assets/js/37.24ab2230.js"><link rel="prefetch" href="/lihao-book/assets/js/38.10c8eb75.js"><link rel="prefetch" href="/lihao-book/assets/js/39.24af5fcc.js"><link rel="prefetch" href="/lihao-book/assets/js/4.476ee372.js"><link rel="prefetch" href="/lihao-book/assets/js/40.51eeecc5.js"><link rel="prefetch" href="/lihao-book/assets/js/41.624121cb.js"><link rel="prefetch" href="/lihao-book/assets/js/42.191ce3be.js"><link rel="prefetch" href="/lihao-book/assets/js/43.65f469b8.js"><link rel="prefetch" href="/lihao-book/assets/js/44.070e98d7.js"><link rel="prefetch" href="/lihao-book/assets/js/45.0b0b27c4.js"><link rel="prefetch" href="/lihao-book/assets/js/46.0e576fa4.js"><link rel="prefetch" href="/lihao-book/assets/js/47.6a88658f.js"><link rel="prefetch" href="/lihao-book/assets/js/48.d85365fb.js"><link rel="prefetch" href="/lihao-book/assets/js/49.a209d1e4.js"><link rel="prefetch" href="/lihao-book/assets/js/5.a2cde265.js"><link rel="prefetch" href="/lihao-book/assets/js/50.ffecd3c8.js"><link rel="prefetch" href="/lihao-book/assets/js/51.db5fe078.js"><link rel="prefetch" href="/lihao-book/assets/js/52.c415495b.js"><link rel="prefetch" href="/lihao-book/assets/js/53.f335984d.js"><link rel="prefetch" href="/lihao-book/assets/js/54.9cb1e1eb.js"><link rel="prefetch" href="/lihao-book/assets/js/55.37216e7a.js"><link rel="prefetch" href="/lihao-book/assets/js/56.50940b87.js"><link rel="prefetch" href="/lihao-book/assets/js/57.6b84893f.js"><link rel="prefetch" href="/lihao-book/assets/js/58.236f23b6.js"><link rel="prefetch" href="/lihao-book/assets/js/59.0597eddd.js"><link rel="prefetch" href="/lihao-book/assets/js/6.433e6c13.js"><link rel="prefetch" href="/lihao-book/assets/js/60.aaa1c0a1.js"><link rel="prefetch" href="/lihao-book/assets/js/61.18dbb3ff.js"><link rel="prefetch" href="/lihao-book/assets/js/62.850aa4cb.js"><link rel="prefetch" href="/lihao-book/assets/js/63.d29cf64a.js"><link rel="prefetch" href="/lihao-book/assets/js/64.c129d97b.js"><link rel="prefetch" href="/lihao-book/assets/js/65.b8eac824.js"><link rel="prefetch" href="/lihao-book/assets/js/66.d0dd8630.js"><link rel="prefetch" href="/lihao-book/assets/js/67.155fbce3.js"><link rel="prefetch" href="/lihao-book/assets/js/68.0d2277af.js"><link rel="prefetch" href="/lihao-book/assets/js/69.2d3fa700.js"><link rel="prefetch" href="/lihao-book/assets/js/7.b99b021d.js"><link rel="prefetch" href="/lihao-book/assets/js/70.e9789293.js"><link rel="prefetch" href="/lihao-book/assets/js/71.b609af2d.js"><link rel="prefetch" href="/lihao-book/assets/js/72.448591b6.js"><link rel="prefetch" href="/lihao-book/assets/js/73.517b93f6.js"><link rel="prefetch" href="/lihao-book/assets/js/74.19a93c92.js"><link rel="prefetch" href="/lihao-book/assets/js/75.82d8763e.js"><link rel="prefetch" href="/lihao-book/assets/js/76.d783b313.js"><link rel="prefetch" href="/lihao-book/assets/js/77.d5d0a63c.js"><link rel="prefetch" href="/lihao-book/assets/js/78.a682c9f5.js"><link rel="prefetch" href="/lihao-book/assets/js/79.108f477b.js"><link rel="prefetch" href="/lihao-book/assets/js/8.6d15d67a.js"><link rel="prefetch" href="/lihao-book/assets/js/80.6042361a.js"><link rel="prefetch" href="/lihao-book/assets/js/81.53d6df33.js"><link rel="prefetch" href="/lihao-book/assets/js/82.667c9c26.js"><link rel="prefetch" href="/lihao-book/assets/js/83.101e355f.js"><link rel="prefetch" href="/lihao-book/assets/js/84.b89209a0.js"><link rel="prefetch" href="/lihao-book/assets/js/85.736ffa39.js"><link rel="prefetch" href="/lihao-book/assets/js/86.383eb908.js"><link rel="prefetch" href="/lihao-book/assets/js/87.604e71ae.js"><link rel="prefetch" href="/lihao-book/assets/js/88.d23769c0.js"><link rel="prefetch" href="/lihao-book/assets/js/89.edf5c806.js"><link rel="prefetch" href="/lihao-book/assets/js/9.95de4758.js"><link rel="prefetch" href="/lihao-book/assets/js/90.cf35f2f3.js"><link rel="prefetch" href="/lihao-book/assets/js/91.6c828043.js"><link rel="prefetch" href="/lihao-book/assets/js/92.154dbd74.js"><link rel="prefetch" href="/lihao-book/assets/js/93.12096301.js"><link rel="prefetch" href="/lihao-book/assets/js/94.7d53d7ab.js"><link rel="prefetch" href="/lihao-book/assets/js/95.303b93bb.js"><link rel="prefetch" href="/lihao-book/assets/js/96.facdf951.js"><link rel="prefetch" href="/lihao-book/assets/js/97.0e58eb61.js"><link rel="prefetch" href="/lihao-book/assets/js/98.d92888d2.js"><link rel="prefetch" href="/lihao-book/assets/js/99.41947e85.js">
    <link rel="stylesheet" href="/lihao-book/assets/css/0.styles.df4cd3eb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lihao-book/" class="home-link router-link-active"><img src="/lihao-book/images/logo.png" alt="笔记" class="logo"> <span class="site-name can-hide">笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lihao-book/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记集合" class="dropdown-title"><span class="title">笔记集合</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记集合" class="mobile-dropdown-title"><span class="title">笔记集合</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lihao-book/JavaScript/1.JS随笔.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Vue/Vue 修饰符.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/React/1、webpack 环境搭建.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Nodejs/tool.html" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Koa/1. 初识 Koa.html" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Webpack/1.Webpack 入门.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/CSS/BFC.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/前端/1.HTTP缓存.html" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/数据结构和算法/二叉搜索树.html" class="nav-link">
  数据结构和算法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏好书" class="dropdown-title"><span class="title">收藏好书</span> <span class="arrow down"></span></button> <button type="button" aria-label="收藏好书" class="mobile-dropdown-title"><span class="title">收藏好书</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lihao-book/ES6-阮一峰/[es6]1.ECMAScript.6.简介.html" class="nav-link">
  ES6 阮一峰
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/TypeScript-xcatliu/" class="nav-link">
  TypeScript xcatliu
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="站点" class="dropdown-title"><span class="title">站点</span> <span class="arrow down"></span></button> <button type="button" aria-label="站点" class="mobile-dropdown-title"><span class="title">站点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://liu-lihao.github.io/lihao-book/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://liu-lihao.gitee.io/lihao-book/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/liu-lihao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lihao-book/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记集合" class="dropdown-title"><span class="title">笔记集合</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记集合" class="mobile-dropdown-title"><span class="title">笔记集合</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lihao-book/JavaScript/1.JS随笔.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Vue/Vue 修饰符.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/React/1、webpack 环境搭建.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Nodejs/tool.html" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Koa/1. 初识 Koa.html" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Webpack/1.Webpack 入门.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/CSS/BFC.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/前端/1.HTTP缓存.html" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/数据结构和算法/二叉搜索树.html" class="nav-link">
  数据结构和算法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏好书" class="dropdown-title"><span class="title">收藏好书</span> <span class="arrow down"></span></button> <button type="button" aria-label="收藏好书" class="mobile-dropdown-title"><span class="title">收藏好书</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lihao-book/ES6-阮一峰/[es6]1.ECMAScript.6.简介.html" class="nav-link">
  ES6 阮一峰
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/TypeScript-xcatliu/" class="nav-link">
  TypeScript xcatliu
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="站点" class="dropdown-title"><span class="title">站点</span> <span class="arrow down"></span></button> <button type="button" aria-label="站点" class="mobile-dropdown-title"><span class="title">站点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://liu-lihao.github.io/lihao-book/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://liu-lihao.gitee.io/lihao-book/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/liu-lihao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lihao-book/前端/1.HTTP缓存.html" class="sidebar-link">HTTP缓存</a></li><li><a href="/lihao-book/前端/2.常见网络攻击.html" class="sidebar-link">常见网络攻击</a></li><li><a href="/lihao-book/前端/3.HTTP协议.html" class="active sidebar-link">HTTP体系</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#不得不提-tcp" class="sidebar-link">不得不提 TCP</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#报文结构" class="sidebar-link">报文结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#起始行" class="sidebar-link">起始行</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#头部" class="sidebar-link">头部</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#空行" class="sidebar-link">空行</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#实体" class="sidebar-link">实体</a></li></ul></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#请求方法" class="sidebar-link">请求方法</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#get-和-post-有什么区别" class="sidebar-link">GET 和 POST 有什么区别？</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#如何理解-uri" class="sidebar-link">如何理解 URI？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#uri-的结构" class="sidebar-link">URI 的结构</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#uri-编码" class="sidebar-link">URI 编码</a></li></ul></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#比较http-0-9和http-1-0" class="sidebar-link">比较HTTP 0.9和HTTP 1.0</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#http-1-1的改进" class="sidebar-link">HTTP 1.1的改进</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#http特点" class="sidebar-link">HTTP特点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#http缺点" class="sidebar-link">HTTP缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#accept-系列字段" class="sidebar-link">Accept 系列字段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#数据格式" class="sidebar-link">数据格式</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#压缩方式" class="sidebar-link">压缩方式</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#支持语言" class="sidebar-link">支持语言</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#字符集" class="sidebar-link">字符集</a></li></ul></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#处理大文件传输" class="sidebar-link">处理大文件传输</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#告知客户端" class="sidebar-link">告知客户端</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#客户端发起" class="sidebar-link">客户端发起</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#服务端响应" class="sidebar-link">服务端响应</a></li></ul></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#http处理表单数据提交" class="sidebar-link">HTTP处理表单数据提交</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#http1-1-如何解决-http-队头阻塞问题" class="sidebar-link">HTTP1.1 如何解决 HTTP 队头阻塞问题</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#cookie-相关" class="sidebar-link">Cookie 相关</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#作用域" class="sidebar-link">作用域</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#安全相关" class="sidebar-link">安全相关</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#cookie-的缺点" class="sidebar-link">Cookie 的缺点</a></li></ul></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#http-代理" class="sidebar-link">HTTP 代理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#功能" class="sidebar-link">功能</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#相关头部" class="sidebar-link">相关头部</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#jsonp" class="sidebar-link">JSONP</a></li></ul></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#https安全在哪" class="sidebar-link">HTTPS安全在哪</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#http2-的改进" class="sidebar-link">HTTP2 的改进</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#http2-多路复用" class="sidebar-link">HTTP2 多路复用</a></li><li class="sidebar-sub-header"><a href="/lihao-book/前端/3.HTTP协议.html#http个版本分层图" class="sidebar-link">HTTP个版本分层图：</a></li></ul></li><li><a href="/lihao-book/前端/4.TCP协议.html" class="sidebar-link">TCP</a></li><li><a href="/lihao-book/前端/5.V8相关.html" class="sidebar-link">V8相关</a></li><li><a href="/lihao-book/前端/6.设计模式.html" class="sidebar-link">设计模式</a></li><li><a href="/lihao-book/前端/7.性能优化.html" class="sidebar-link">Web 性能优化技术</a></li><li><a href="/lihao-book/前端/8.框架相关.html" class="sidebar-link">框架相关</a></li><li><a href="/lihao-book/前端/9.npm.html" class="sidebar-link">npm</a></li><li><a href="/lihao-book/前端/10.mate标签.html" class="sidebar-link">mate 标签</a></li><li><a href="/lihao-book/前端/11.rollup、ts、umd配置.html" class="sidebar-link">rollup + ts + umd 配置</a></li><li><a href="/lihao-book/前端/12.rollup插件-cn.html" class="sidebar-link">rollup 插件开发(中)</a></li><li><a href="/lihao-book/前端/13.rollup插件-en.html" class="sidebar-link">rollup 插件开发(英)</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="http体系"><a href="#http体系" class="header-anchor">#</a> HTTP体系</h1> <p>不多说，上脑图：</p> <p><img src="/lihao-book/assets/img/HTTP-Main.e9ffe442.jpg" alt="HTTP脑图"></p> <h2 id="不得不提-tcp"><a href="#不得不提-tcp" class="header-anchor">#</a> 不得不提 TCP</h2> <p>左转见 TCP 文档。</p> <h2 id="报文结构"><a href="#报文结构" class="header-anchor">#</a> 报文结构</h2> <p>区分 <strong>请求报文</strong> 和 <strong>响应报文</strong>，但都符合如下结构：</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>起始行 + 头部 + 【空行】 + 实体
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="起始行"><a href="#起始行" class="header-anchor">#</a> 起始行</h3> <p>请求报文</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>GET /getInfo?id=66 HTTP/1.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>响应报文</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>HTTP/1.1 200 OK
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="头部"><a href="#头部" class="header-anchor">#</a> 头部</h3> <p>请求头的字段非常多，涉及到很多 http 的特性，大体格式：</p> <ul><li>字段名不区分大小写</li> <li>字段名不允许出现空格，不可以出现下划线 <code>_</code></li> <li>字段名后面必须<strong>紧接着 <code>:</code></strong></li></ul> <p>所在位置：</p> <p><img src="/lihao-book/assets/img/Request-Headers.1fe4c112.png" alt="请求头"></p> <p><img src="/lihao-book/assets/img/Response-Headers.cb0d1d2c.png" alt="响应头"></p> <h3 id="空行"><a href="#空行" class="header-anchor">#</a> 空行</h3> <p>很重要，用来区分开 <strong>头部</strong> 和 <strong>实体</strong>。</p> <p>问: 如果说在头部中间故意加一个空行会怎么样？</p> <p>那么<strong>空行后的内容全部被视为实体</strong>。</p> <h3 id="实体"><a href="#实体" class="header-anchor">#</a> 实体</h3> <p>就是具体的数据了，也就是 <code>body</code> 部分。请求报文对应 <strong>请求体</strong>, 响应报文对应 <strong>响应体</strong>。</p> <h2 id="请求方法"><a href="#请求方法" class="header-anchor">#</a> 请求方法</h2> <p>HTTP1.0 定义了三种请求方法： GET, POST 和 HEAD方法。</p> <p>HTTP1.1 新增了六种请求方法：OPTIONS、PUT、PATCH、DELETE、TRACE 和 CONNECT 方法。</p> <table><thead><tr><th style="text-align:left;">序号</th> <th style="text-align:left;">方法</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">1*</td> <td style="text-align:left;">GET</td> <td style="text-align:left;">请求指定的页面信息，并返回实体主体。</td></tr> <tr><td style="text-align:left;">2</td> <td style="text-align:left;">HEAD</td> <td style="text-align:left;">类似于 GET 请求，只不过返回的响应中没有具体的内容，用于获取报头</td></tr> <tr><td style="text-align:left;">3*</td> <td style="text-align:left;">POST</td> <td style="text-align:left;">向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST 请求可能会导致新的资源的建立和/或已有资源的修改。</td></tr> <tr><td style="text-align:left;">4*</td> <td style="text-align:left;">PUT</td> <td style="text-align:left;">从客户端向服务器传送的数据取代指定的文档的内容。</td></tr> <tr><td style="text-align:left;">5*</td> <td style="text-align:left;">DELETE</td> <td style="text-align:left;">请求服务器删除指定的页面。</td></tr> <tr><td style="text-align:left;">6</td> <td style="text-align:left;">CONNECT</td> <td style="text-align:left;">HTTP/1.1 协议中预留给能够将连接改为管道方式的代理服务器。</td></tr> <tr><td style="text-align:left;">7*</td> <td style="text-align:left;">OPTIONS</td> <td style="text-align:left;">允许客户端查看服务器的性能。</td></tr> <tr><td style="text-align:left;">8</td> <td style="text-align:left;">TRACE</td> <td style="text-align:left;">回显服务器收到的请求，主要用于测试或诊断。</td></tr> <tr><td style="text-align:left;">9*</td> <td style="text-align:left;">PATCH</td> <td style="text-align:left;">是对 PUT 方法的补充，用来对已知资源进行局部更新 。</td></tr></tbody></table> <h2 id="get-和-post-有什么区别"><a href="#get-和-post-有什么区别" class="header-anchor">#</a> <code>GET</code> 和 <code>POST</code> 有什么区别？</h2> <ul><li>语义。</li> <li>从<strong>缓存</strong>的角度，GET 请求会被浏览器主动缓存下来，留下历史记录，而 POST 默认不会。</li> <li>从<strong>编码</strong>的角度，GET 只能进行 URL 编码，只能接收 ASCII 字符，而 POST 没有限制。</li> <li>从<strong>参数</strong>的角度，GET 一般放在 URL 中，因此不安全，POST 放在请求体中，更适合传输敏感信息。</li> <li>从<strong>幂等性</strong>的角度，<code>GET</code>是<strong>幂等</strong>的，而<code>POST</code>不是。(<code>幂等</code>表示执行相同的操作，结果也是相同的)</li> <li>从<strong>TCP</strong>的角度，GET 请求会把请求报文一次性发出去，而 POST 会分为两个 TCP 数据包，首先发 header 部分，如果服务器响应 100(continue)， 然后发 body 部分。(<strong>火狐</strong>浏览器除外，它的 POST 请求只发一个 TCP 包)</li></ul> <h2 id="如何理解-uri"><a href="#如何理解-uri" class="header-anchor">#</a> 如何理解 URI？</h2> <p>全称为(Uniform Resource Identifier), 也就是<strong>统一资源标识符</strong></p> <p>但是，它并不是我们常说的<code>网址</code>, 网址指的是<code>URL</code>, 实际上<code>URI</code>包含了<code>URN</code>和<code>URL</code>两个部分，由于 URL 过于普及，就默认将 URI 视为 URL 了。</p> <h3 id="uri-的结构"><a href="#uri-的结构" class="header-anchor">#</a> URI 的结构</h3> <p><img src="/lihao-book/assets/img/URI-Structure.ff41d020.png" alt="URI结构"></p> <ul><li><p><strong>scheme</strong>: 表示协议名，比如<code>http</code>, <code>https</code>, <code>file</code>等等。后面必须和<code>://</code>连在一起。</p></li> <li><p><strong>user:passwd@</strong>: 表示登录主机时的用户信息，不过很不安全，不推荐使用，也不常用。</p></li> <li><p><strong>host:port</strong>: 表示主机名和端口。</p></li> <li><p><strong>path</strong>: 表示请求路径，标记资源所在位置。</p></li> <li><p><strong>query</strong>: 表示查询参数，为<code>key=val</code>这种形式，多个键值对之间用<code>&amp;</code>隔开。</p></li> <li><p><strong>fragment</strong>: 表示 URI 所定位的资源内的一个<strong>锚点</strong>，浏览器可以根据这个锚点跳转到对应的位置。</p></li></ul> <p>举个例子：</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>https://www.baidu.com/s?wd=HTTP&amp;rsv_spt=1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个 URI 中，<code>https</code>即<code>scheme</code>部分，<code>www.baidu.com</code>为<code>host:port</code>部分（注意，http 和 https 的默认端口分别为80、443），<code>/s</code>为<code>path</code>部分，而<code>wd=HTTP&amp;rsv_spt=1</code>就是<code>query</code>部分。</p> <h3 id="uri-编码"><a href="#uri-编码" class="header-anchor">#</a> URI 编码</h3> <p>URI 只能使用<code>ASCII</code>, ASCII 之外的字符是不支持显示的，而且还有一部分符号是界定符，如果不加以处理就会导致解析出错。</p> <p>因此，URI 引入了<code>编码</code>机制，将所有<strong>非 ASCII 码字符</strong>和<strong>界定符</strong>转为十六进制字节值，然后在前面加个<code>%</code>。也就是我们在前端项目常用的 <code>encodeURI()</code> / <code>encodeURIComponent()</code> / <code>decodeURI()</code> / <code>decodeURIComponent()</code> 方法。</p> <p>如，空格被转义成了<code>%20</code>。</p> <h2 id="比较http-0-9和http-1-0"><a href="#比较http-0-9和http-1-0" class="header-anchor">#</a> 比较HTTP 0.9和HTTP 1.0</h2> <ol><li>HTTP 0.9只是一个简单的协议，只有一个GET方法，没有首部，目标用来获取HTML。</li> <li>HTTP 1.0协议大量内容：首部，响应码，重定向，错误，条件请求，内容编码等。</li></ol> <h2 id="http-1-1的改进"><a href="#http-1-1的改进" class="header-anchor">#</a> HTTP 1.1的改进</h2> <p>HTTP1.1 中浏览器再也不用为每个请求重新发起TCP连接( <code>connection: keep-alive</code> )了，增加内容有：</p> <ul><li><p>缓存相关头部的扩展</p></li> <li><p>OPTIONS方法</p> <p>用来查询针对请求URI指定的资源支持的方法</p></li> <li><p>Upgrade 头部</p> <p>切换到增强的协议类型，如 HTTP/2.0 或 WebSockets</p></li> <li><p>Range请求</p> <p>指定资源范围</p></li> <li><p>压缩和传输编码</p> <p>gzip</p></li> <li><p>管道化</p> <p>不用等待响应即可直接发送下一个请求</p></li></ul> <h2 id="http特点"><a href="#http特点" class="header-anchor">#</a> HTTP特点</h2> <ul><li><p><strong>灵活可扩展</strong>，主要体现在两个方面。一个是语义上的自由，只规定了基本格式，比如空格分隔单词，换行分隔字段，其他的各个部分都没有严格的语法限制。另一个是传输形式的多样性，不仅仅可以传输文本，还能传输图片、视频等任意数据，非常方便。</p></li> <li><p><strong>可靠传输</strong>。HTTP 基于 TCP/IP，因此把这一特性继承了下来。这属于 TCP 的特性，不具体介绍了。</p></li> <li><p><strong>请求-应答</strong>。也就是<code>一发一收</code>、<code>有来有回</code>， 当然这个请求方和应答方不单单指客户端和服务器之间，如果某台服务器作为代理来连接后端的服务端，那么这台服务器也会扮演<strong>请求方</strong>的角色。</p></li> <li><p><strong>无状态</strong>。这里的状态是指<strong>通信过程的上下文信息</strong>，而每次 http 请求都是独立、无关的，默认不需要保留状态信息。</p></li></ul> <h3 id="http缺点"><a href="#http缺点" class="header-anchor">#</a> HTTP缺点</h3> <ul><li><p>明文传输</p> <p>即协议里的报文(主要指的是头部)不使用二进制数据，而是文本形式。</p> <p>这当然对于调试提供了便利，但同时也让 HTTP 的报文信息暴露给了外界，给攻击者也提供了便利。<code>WIFI陷阱</code>就是利用 HTTP 明文传输的缺点，诱导你连上热点，然后疯狂抓你所有的流量，从而拿到你的敏感信息。</p></li> <li><p>队头阻塞</p> <p>当 http 开启长连接时，共用一个 TCP 连接，同一时刻只能处理一个请求，那么当前请求耗时过长的情况下，其它的请求只能处于阻塞状态，也就是著名的<strong>队头阻塞</strong>问题。接下来会有一小节讨论这个问题。</p></li></ul> <h2 id="accept-系列字段"><a href="#accept-系列字段" class="header-anchor">#</a> Accept 系列字段</h2> <p>四个部分: <strong>数据格式</strong>、<strong>压缩方式</strong>、<strong>支持语言</strong>和<strong>字符集</strong>。</p> <p><img src="/lihao-book/assets/img/Accept-Fields.aac269eb.png" alt="Accept系列字段"></p> <h3 id="数据格式"><a href="#数据格式" class="header-anchor">#</a> 数据格式</h3> <p>接收端使用 <code>Accept</code> ，体现在 <code>Content-Type</code> 字段上。</p> <p>取值如下：</p> <ul><li><p>text： text/html, text/plain, text/css 等</p></li> <li><p>image: image/gif, image/jpeg, image/png 等</p></li> <li><p>audio/video: audio/mpeg, video/mp4 等</p></li> <li><p>application: application/json, application/javascript, application/pdf, application/octet-stream</p></li></ul> <h3 id="压缩方式"><a href="#压缩方式" class="header-anchor">#</a> 压缩方式</h3> <p>接收端使用 <code>Accept-Encoding</code> ，体现在 <code>Content-Encoding</code> 字段上。</p> <ul><li>gzip: 当今最流行的压缩格式</li> <li>deflate: 另外一种著名的压缩格式</li> <li>br: 一种专门为 HTTP 发明的压缩算法</li></ul> <h3 id="支持语言"><a href="#支持语言" class="header-anchor">#</a> 支持语言</h3> <p>接收端使用 <code>Accept-Language</code> ，体现在 <code>Content-Language</code> 字段上。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 发送端</span>
Content<span class="token operator">-</span>Language<span class="token operator">:</span> zh<span class="token operator">-</span><span class="token constant">CN</span><span class="token punctuation">,</span> zh<span class="token punctuation">,</span> en
<span class="token comment">// 接收端</span>
Accept<span class="token operator">-</span>Language<span class="token operator">:</span> zh<span class="token operator">-</span><span class="token constant">CN</span><span class="token punctuation">,</span> zh<span class="token punctuation">,</span> en
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="字符集"><a href="#字符集" class="header-anchor">#</a> 字符集</h3> <p>接收端使用 <code>Accept-Charset</code> ，体现在 <code>Content-Type</code> 字段上。(注意没有 <code>Content-Charset</code> )</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 发送端</span>
Content<span class="token operator">-</span>Type<span class="token operator">:</span> text<span class="token operator">/</span>html<span class="token punctuation">;</span> charset<span class="token operator">=</span>utf<span class="token operator">-</span><span class="token number">8</span>
<span class="token comment">// 接收端</span>
Accept<span class="token operator">-</span>Charset<span class="token operator">:</span> charset<span class="token operator">=</span>utf<span class="token operator">-</span><span class="token number">8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="处理大文件传输"><a href="#处理大文件传输" class="header-anchor">#</a> 处理大文件传输</h2> <p>如视频预览、大文件分块上传...</p> <p>都是用的是 接收端：<code>Range</code>、发送端： <code>Content-Range</code></p> <h3 id="告知客户端"><a href="#告知客户端" class="header-anchor">#</a> 告知客户端</h3> <p>首先服务端向客户端发送</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Accept<span class="token operator">-</span>Ranges<span class="token operator">:</span> none
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>用来告知客户端这边是支持范围请求的。</p> <h3 id="客户端发起"><a href="#客户端发起" class="header-anchor">#</a> 客户端发起</h3> <p>客户端发起指定范围的请求，格式如下：<code>bytes=x-y</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 单段数据</span>
Range<span class="token operator">:</span> bytes<span class="token operator">=</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span>
<span class="token comment">// 30- 表示从30到终点</span>
<span class="token comment">// -30 表示从起点到30</span>
<span class="token comment">// 多段数据</span>
Range<span class="token operator">:</span> bytes<span class="token operator">=</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token operator">-</span><span class="token number">39</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="服务端响应"><a href="#服务端响应" class="header-anchor">#</a> 服务端响应</h3> <p>服务器收到请求之后，首先验证范围<strong>是否合法</strong>，如果越界了那么返回<code>416</code>错误码，否则读取相应片段，返回<code>206</code>状态码。</p> <h2 id="http处理表单数据提交"><a href="#http处理表单数据提交" class="header-anchor">#</a> HTTP处理表单数据提交</h2> <p>主要体现在两种不同的 <code>Content-Type</code> 取值:</p> <ul><li><code>application/x-www-form-urlencoded</code> <ul><li>其中的数据会被编码成以<code>&amp;</code>分隔的键值对</li> <li>字符以<strong>URL编码方式</strong>编码。</li></ul></li> <li><code>multipart/form-data</code> <ul><li>请求头中的<code>Content-Type</code>字段会包含<code>boundary</code>，且<code>boundary</code>的值有浏览器默认指定。例: <code>Content-Type: multipart/form-data;boundary=----WebkitFormBoundaryRRJKeWfHPGrS4LKe</code>。</li> <li>数据会分为多个部分，每两个部分之间通过分隔符来分隔，每部分表述均有 HTTP 头部描述子包体，如<code>Content-Type</code>，在最后的分隔符会加上<code>--</code>表示结束。</li></ul></li></ul> <p><strong>总结</strong>：</p> <ul><li><p><code>multipart/form-data</code> 格式最大的特点在于:<strong>每一个表单元素都是独立的资源表述</strong>。</p></li> <li><p>对于图片等文件的上传，基本采用<code>multipart/form-data</code>，因为没必要对文件进行URL编码。</p></li></ul> <h2 id="http1-1-如何解决-http-队头阻塞问题"><a href="#http1-1-如何解决-http-队头阻塞问题" class="header-anchor">#</a> HTTP1.1 如何解决 HTTP 队头阻塞问题</h2> <p><strong>为什么会造成队头阻塞？</strong></p> <p>HTTP 传输是基于<code>请求-应答</code>的模式进行的，报文必须是一发一收，但值得注意的是，里面的任务被放在一个任务队列中串行执行，一旦队首的请求处理太慢，就会阻塞后面请求的处理。这就是著名的<code>HTTP队头阻塞</code>问题。</p> <p><strong>解决方式：</strong></p> <ul><li><p>并发链接</p> <p>Chrome 中是 6 个。</p></li> <li><p>域名分片</p> <p>一个域名不是可以并发 6 个长连接吗？那我就多分几个域名。（比如：c1.xx.com 、c2.xx.com。）</p></li></ul> <h2 id="cookie-相关"><a href="#cookie-相关" class="header-anchor">#</a> Cookie 相关</h2> <p>Cookie 相当于为 HTTP 添加了状态。</p> <h3 id="作用域"><a href="#作用域" class="header-anchor">#</a> 作用域</h3> <p>关于作用域也有两个属性: <strong>Domain</strong>和<strong>path</strong>, 给 <strong>Cookie</strong> 绑定了域名和路径，在发送请求之前，发现域名或者路径和这两个属性不匹配，那么就不会带上 Cookie。值得注意的是，对于路径来说，<code>/</code>表示域名下的任意路径都允许使用 Cookie。</p> <h3 id="安全相关"><a href="#安全相关" class="header-anchor">#</a> 安全相关</h3> <p>如果带上<code>Secure</code>，说明只能通过 HTTPS 传输 cookie。</p> <p>如果 cookie 字段带上<code>HttpOnly</code>，那么说明只能通过 HTTP 协议传输，不能通过 JS 访问，这也是预防 XSS 攻击的重要手段。</p> <p>相应的，对于 CSRF 攻击的预防，也有<code>SameSite</code>属性。</p> <p><code>SameSite</code>可以设置为三个值，<code>Strict</code>、<code>Lax</code>和<code>None</code>。</p> <ul><li><p>在<code>Strict</code>模式下，浏览器完全禁止第三方请求携带Cookie。比如请求<code>sanyuan.com</code>网站只能在<code>sanyuan.com</code>域名当中请求才能携带 Cookie，在其他网站请求都不能。</p></li> <li><p>在<code>Lax</code>模式，就宽松一点了，但是只能在 <code>get 方法提交表单</code>况或者<code>a 标签发送 get 请求</code>的情况下可以携带 Cookie，其他情况均不能。</p></li> <li><p>在<code>None</code>模式下，也就是默认模式，请求会自动携带上 Cookie。</p></li></ul> <h3 id="cookie-的缺点"><a href="#cookie-的缺点" class="header-anchor">#</a> Cookie 的缺点</h3> <ol><li>容量缺陷。Cookie 的体积上限只有<code>4KB</code>，只能用来存储少量的信息。</li> <li>性能缺陷。Cookie 紧跟域名，不管域名下面的某一个地址需不需要这个 Cookie ，请求都会携带上完整的 Cookie，这样随着请求数的增多，其实会造成巨大的性能浪费的，因为请求携带了很多不必要的内容。但可以通过<code>Domain</code>和<code>Path</code>指定<strong>作用域</strong>来解决。</li> <li>安全缺陷。由于 Cookie 以纯文本的形式在浏览器和服务器中传递，很容易被非法用户截获，然后进行一系列的篡改，在 Cookie 的有效期内重新发送给服务器，这是相当危险的。另外，在<code>HttpOnly</code>为 false 的情况下，Cookie 信息能直接通过 JS 脚本来读取。</li></ol> <h2 id="http-代理"><a href="#http-代理" class="header-anchor">#</a> HTTP 代理</h2> <p>引入代理之后，作为代理的服务器相当于一个中间人的角色，对于客户端而言，表现为服务器进行响应；而对于源服务器，表现为客户端发起请求，具有<strong>双重身份</strong>。</p> <h3 id="功能"><a href="#功能" class="header-anchor">#</a> 功能</h3> <ol><li><strong>负载均衡</strong>。客户端的请求只会先到达代理服务器，后面到底有多少源服务器，IP 都是多少，客户端是不知道的。因此，这个代理服务器可以拿到这个请求之后，可以通过特定的算法分发给不同的源服务器，让各台源服务器的负载尽量平均。当然，这样的算法有很多，包括<strong>随机算法</strong>、<strong>轮询</strong>、<strong>一致性hash</strong>、<strong>LRU</strong><code>(最近最少使用)</code>等等。</li> <li><strong>保障安全</strong>。利用<strong>心跳</strong>机制监控后台的服务器，一旦发现故障机就将其踢出集群。并且对于上下行的数据进行过滤，对非法 IP 限流，这些都是代理服务器的工作。</li> <li><strong>缓存代理</strong>。将内容缓存到代理服务器，使得客户端可以直接从代理服务器获得而不用到源服务器那里。下一节详细拆解。</li></ol> <h3 id="相关头部"><a href="#相关头部" class="header-anchor">#</a> 相关头部</h3> <ul><li><p><code>Via</code></p> <p>标明身份，留下痕迹。如：<code>Via: proxy_server2, proxy_server1</code></p></li> <li><p><code>X-Forwarded-For</code></p> <p>为谁转发，记录 <strong>请求方</strong> 的 <code>IP</code> 。</p></li> <li><p><code>X-Real-IP</code></p> <p>记录 <strong>客户端</strong> 的真实 <code>IP</code> 。</p></li></ul> <blockquote><p>X-Forwarded-For产生的问题：
X-Forwarded-For这个字段记录的是请求方的 IP，这意味着每经过一个不同的代理，这个字段的名字都要变，从客户端到代理1，这个字段是客户端的 IP，从代理1到代理2，这个字段就变为了代理1的 IP。</p> <ol><li>意味着代理必须解析 HTTP 请求头，然后修改，比直接转发数据性能下降。</li> <li>在 HTTPS 通信加密的过程中，原始报文是不允许修改的。
由此产生了 <em>代理协议</em>，一般使用明文版本，只需要在 HTTP 请求行上面加上这样格式的文本即可:</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// PROXY + TCP4/TCP6 + 请求方地址 + 接收方地址 + 请求端口 + 接收端口</span>
<span class="token constant">PROXY</span> <span class="token constant">TCP4</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.1</span> <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.2</span> <span class="token number">1111</span> <span class="token number">2222</span>
<span class="token constant">GET</span> <span class="token operator">/</span> <span class="token constant">HTTP</span><span class="token operator">/</span><span class="token number">1.1</span>
<span class="token operator">...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></blockquote> <h3 id="jsonp"><a href="#jsonp" class="header-anchor">#</a> JSONP</h3> <p>利用标签的 <code>scr</code> 支持跨域的特性，来实现 <code>get</code> 请求。</p> <h2 id="https安全在哪"><a href="#https安全在哪" class="header-anchor">#</a> HTTPS安全在哪</h2> <p>HTTPS并不是一个新的协议, 它在<code>HTTP</code>和<code>TCP</code>的传输中建立了一个安全层，利用<code>对称加密</code>和<code>非对称机密</code>结合数字证书认证的方式，让传输过程的安全性大大提高。</p> <p>在 HTTP 下面增加了一层 SSL/TLS 协议，简单的讲，<strong>HTTPS = HTTP + SSL/TLS</strong>。</p> <p>大体流程：</p> <ol><li>浏览器向服务器发送<code>client_random</code>和加密方法列表。</li> <li>服务器接收到，返回<code>server_random</code>、加密方法以及公钥。</li> <li>浏览器接收，接着生成另一个随机数<code>pre_random</code>, 并且用公钥加密，传给服务器。(敲黑板！重点操作！)</li> <li>服务器用公钥解密这个被加密后的<code>pre_random</code>。</li></ol> <p>现在浏览器和服务器有三样相同的凭证:<code>client_random</code>、<code>server_random</code>和<code>pre_random</code>。然后两者用相同的加密方法混合这三个随机数，生成最终的<code>密钥</code>。</p> <p>然后浏览器和服务器尽管用一样的密钥进行通信，即使用<code>对称加密</code>。</p> <p>这个最终的密钥是很难被中间人拿到的，为什么呢? 因为中间人没有私钥，从而<strong>拿不到pre_random</strong>，也就无法生成最终的密钥了。</p> <p>回头比较一下和单纯的使用<strong>非对称加密</strong>, 这种方式做了什么改进呢？本质上是<strong>防止了私钥加密的数据外传</strong>。单独使用<strong>非对称加密</strong>，最大的漏洞在于服务器传数据给浏览器只能用<code>私钥</code>加密，这是危险产生的根源。利用<code>对称和非对称</code>加密结合的方式，就防止了这一点，从而保证了安全。</p> <h2 id="http2-的改进"><a href="#http2-的改进" class="header-anchor">#</a> HTTP2 的改进</h2> <p>性能提升：</p> <ul><li><p>头部压缩</p> <p>采用 <strong>HPack算法</strong> 对请求头压缩。（1、对请求头字段建哈希表，下次只需传输索引即可；2、对整数、字符串进行 <strong>哈弗曼编码</strong>）</p></li> <li><p>多路复用</p> <p>把报文全部转为二进制格式（各个部分被拆分为xx帧，如：<em>Headers帧</em>），HTTP/2 用 <strong>流</strong> 来在一个 TCP 连接上来进行多个数据帧的通信（在服务端会重新组装）。通过其他字段还实现了 <strong>优先级</strong> 、 <strong>流量控制</strong> 等功能。</p></li></ul> <p>颠覆性的功能实现：</p> <ul><li><p>设置请求优先级</p> <p>每个资源都获取一个stream ID来标识连接上的资源，并且有三个参数用于定义资源优先级：</p> <ol><li>父级数据流(Parent Stream)：这个数据流是一个“依赖”资源或者应该在之后被传递的数据流。有一个所有数据流共享的虚拟root stream 0。</li> <li>权重(Weight)：1到256之间的数字，用于标识在多个数据流共享连接时分配给此数据流的带宽量。带宽是相对于所有其他活动的数据流的权重分配的，而不是绝对值。</li> <li>独占位(Exclusive bit)：一个标志，表示应该在不与任何其他数据流共享带宽的情况下下载。</li></ol></li> <li><p>服务器推送</p> <p>使服务器也能新建 stream 来给客户端发送消息，当 TCP 连接建立之后，比如浏览器请求一个 HTML 文件，服务器就可以在返回 HTML 的基础上，将 HTML 中引用到的其他资源文件一起返回给客户端，减少客户端的等待。</p></li></ul> <blockquote><p><strong>流</strong> 的特性：</p> <ul><li><p>并发性。一个 HTTP/2 连接上可以同时发多个帧，这一点和 HTTP/1 不同。这也是实现<strong>多路</strong>复用的基础。</p></li> <li><p>自增性。流 ID 是不可重用的，而是会按顺序递增，达到上限之后又新开 TCP 连接从头开始。</p></li> <li><p>双向性。客户端和服务端都可以创建流，互不干扰，双方都可以作为<code>发送方</code>或者<code>接收方</code>。</p></li> <li><p>可设置优先级。可以设置数据帧的优先级，让服务端先处理重要资源，优化用户体验。</p></li></ul></blockquote> <h2 id="http2-多路复用"><a href="#http2-多路复用" class="header-anchor">#</a> HTTP2 多路复用</h2> <p>在 HTTP/1 中，每次请求都会建立一次HTTP连接，也就是我们常说的3次握手4次挥手，这个过程在一次请求过程中占用了相当长的时间，即使开启了 <code>Keep-Alive</code> ，解决了多次连接的问题，但是依然有两个效率上的问题：</p> <ul><li>第一个：<strong>串行的文件传输</strong>。当请求a文件时，b文件只能等待，等待a连接到服务器、服务器处理文件、服务器返回文件，这三个步骤。我们假设这三步用时都是1秒，那么a文件用时为3秒，b文件传输完成用时为6秒，依此类推。（注：此项计算有一个前提条件，就是浏览器和服务器是单通道传输）</li> <li>第二个：连接数过多。我们假设Apache设置了最大并发数为300，因为浏览器限制，浏览器发起的最大请求数为6，也就是服务器能承载的最高并发为50，当第51个人访问时，就需要等待前面某个请求处理完成。</li></ul> <p>HTTP/2的多路复用就是为了解决上述的两个性能问题。
在 HTTP/2 中，有两个非常重要的概念，分别是 <strong>帧（frame）</strong> 和 <strong>流（stream）</strong> 。
帧代表着最小的数据单位，每个帧会标识出该帧属于哪个流，流也就是多个帧组成的数据流。
多路复用，就是<strong>在一个 TCP 连接中可以存在多条流</strong>。换句话说，也就是可以发送多个请求，对端可以<strong>通过帧中的标识知道属于哪个请求</strong>。通过这个技术，可以避免 HTTP 旧版本中的队头阻塞问题，极大的提高传输性能。</p> <h2 id="http个版本分层图"><a href="#http个版本分层图" class="header-anchor">#</a> HTTP个版本分层图：</h2> <p><img src="/lihao-book/assets/img/HTTP-All-Version.621107f2.png" alt="HTTP各版本分层图"></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/7/23 下午5:17:51</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lihao-book/前端/2.常见网络攻击.html" class="prev">
        常见网络攻击
      </a></span> <span class="next"><a href="/lihao-book/前端/4.TCP协议.html">
        TCP
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/lihao-book/assets/js/app.53c2ddcc.js" defer></script><script src="/lihao-book/assets/js/2.763f5227.js" defer></script><script src="/lihao-book/assets/js/3.12312282.js" defer></script><script src="/lihao-book/assets/js/12.6d44314b.js" defer></script>
  </body>
</html>
