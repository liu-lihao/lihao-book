<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>代码检查 | 笔记</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/lihao-book/images/favicon.ico">
    <script src="/lihao-book/js/theme.js"></script>
    <link rel="manifest" href="/lihao-book/manifest.json">
    <link rel="apple-touch-icon" href="/lihao-book/images/logo.png">
    <link rel="mask-icon" href="/lihao-book/images/egg.svg" color="#d49400">
    <meta name="description" content="在这里记下我的笔记，方便查阅">
    <meta name="theme-color" content="#d49400">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-TileImage" content="/lihao-book/images/logo.png">
    
    <link rel="preload" href="/lihao-book/assets/css/0.styles.4cb38b6f.css" as="style"><link rel="preload" href="/lihao-book/assets/js/app.a7784270.js" as="script"><link rel="preload" href="/lihao-book/assets/js/2.cc29f35f.js" as="script"><link rel="preload" href="/lihao-book/assets/js/17.5a94abc0.js" as="script"><link rel="preload" href="/lihao-book/assets/js/13.b9e03290.js" as="script"><link rel="prefetch" href="/lihao-book/assets/js/10.ddc3aee7.js"><link rel="prefetch" href="/lihao-book/assets/js/100.65ecbf90.js"><link rel="prefetch" href="/lihao-book/assets/js/101.45034f47.js"><link rel="prefetch" href="/lihao-book/assets/js/102.21070358.js"><link rel="prefetch" href="/lihao-book/assets/js/103.81baf330.js"><link rel="prefetch" href="/lihao-book/assets/js/104.96cd59ad.js"><link rel="prefetch" href="/lihao-book/assets/js/105.830ac272.js"><link rel="prefetch" href="/lihao-book/assets/js/106.9f9b9344.js"><link rel="prefetch" href="/lihao-book/assets/js/107.ff432364.js"><link rel="prefetch" href="/lihao-book/assets/js/108.8ea46a48.js"><link rel="prefetch" href="/lihao-book/assets/js/109.d65853fa.js"><link rel="prefetch" href="/lihao-book/assets/js/11.68340129.js"><link rel="prefetch" href="/lihao-book/assets/js/110.857ec4b0.js"><link rel="prefetch" href="/lihao-book/assets/js/111.9b284e98.js"><link rel="prefetch" href="/lihao-book/assets/js/112.f4b3c5a5.js"><link rel="prefetch" href="/lihao-book/assets/js/113.eb22d1a4.js"><link rel="prefetch" href="/lihao-book/assets/js/114.1a98bda4.js"><link rel="prefetch" href="/lihao-book/assets/js/115.924c85e2.js"><link rel="prefetch" href="/lihao-book/assets/js/116.d608aecc.js"><link rel="prefetch" href="/lihao-book/assets/js/117.c2018e31.js"><link rel="prefetch" href="/lihao-book/assets/js/118.c750f1a7.js"><link rel="prefetch" href="/lihao-book/assets/js/119.293886a9.js"><link rel="prefetch" href="/lihao-book/assets/js/12.c3ae57be.js"><link rel="prefetch" href="/lihao-book/assets/js/120.7599472e.js"><link rel="prefetch" href="/lihao-book/assets/js/121.04f2c3fd.js"><link rel="prefetch" href="/lihao-book/assets/js/122.4f5c8c8d.js"><link rel="prefetch" href="/lihao-book/assets/js/123.bf452f1d.js"><link rel="prefetch" href="/lihao-book/assets/js/124.4d41abab.js"><link rel="prefetch" href="/lihao-book/assets/js/125.36afc8b8.js"><link rel="prefetch" href="/lihao-book/assets/js/126.923f880e.js"><link rel="prefetch" href="/lihao-book/assets/js/127.bb315356.js"><link rel="prefetch" href="/lihao-book/assets/js/128.a4785d71.js"><link rel="prefetch" href="/lihao-book/assets/js/129.6d7f1dfd.js"><link rel="prefetch" href="/lihao-book/assets/js/130.b68903c6.js"><link rel="prefetch" href="/lihao-book/assets/js/131.f86dba00.js"><link rel="prefetch" href="/lihao-book/assets/js/132.d4d8b37e.js"><link rel="prefetch" href="/lihao-book/assets/js/133.83ec44e5.js"><link rel="prefetch" href="/lihao-book/assets/js/134.153ddd99.js"><link rel="prefetch" href="/lihao-book/assets/js/135.462c580d.js"><link rel="prefetch" href="/lihao-book/assets/js/136.781969d5.js"><link rel="prefetch" href="/lihao-book/assets/js/137.c3c0340d.js"><link rel="prefetch" href="/lihao-book/assets/js/138.24b18e8d.js"><link rel="prefetch" href="/lihao-book/assets/js/139.8cd48176.js"><link rel="prefetch" href="/lihao-book/assets/js/14.8ab7286a.js"><link rel="prefetch" href="/lihao-book/assets/js/140.e0c48610.js"><link rel="prefetch" href="/lihao-book/assets/js/141.4de7e224.js"><link rel="prefetch" href="/lihao-book/assets/js/142.bc822060.js"><link rel="prefetch" href="/lihao-book/assets/js/143.4acafd12.js"><link rel="prefetch" href="/lihao-book/assets/js/144.acb66cb0.js"><link rel="prefetch" href="/lihao-book/assets/js/145.14cca5d5.js"><link rel="prefetch" href="/lihao-book/assets/js/146.73761207.js"><link rel="prefetch" href="/lihao-book/assets/js/147.bb596671.js"><link rel="prefetch" href="/lihao-book/assets/js/148.d0b38512.js"><link rel="prefetch" href="/lihao-book/assets/js/149.d6cef165.js"><link rel="prefetch" href="/lihao-book/assets/js/15.11376457.js"><link rel="prefetch" href="/lihao-book/assets/js/150.888059ab.js"><link rel="prefetch" href="/lihao-book/assets/js/151.859ed13a.js"><link rel="prefetch" href="/lihao-book/assets/js/16.2aa5f128.js"><link rel="prefetch" href="/lihao-book/assets/js/18.22266ea8.js"><link rel="prefetch" href="/lihao-book/assets/js/19.9d5e202c.js"><link rel="prefetch" href="/lihao-book/assets/js/20.2bf4d527.js"><link rel="prefetch" href="/lihao-book/assets/js/21.c27c9b35.js"><link rel="prefetch" href="/lihao-book/assets/js/22.73c49180.js"><link rel="prefetch" href="/lihao-book/assets/js/23.547f0af3.js"><link rel="prefetch" href="/lihao-book/assets/js/24.92f9cb66.js"><link rel="prefetch" href="/lihao-book/assets/js/25.dad95fa9.js"><link rel="prefetch" href="/lihao-book/assets/js/26.51290e38.js"><link rel="prefetch" href="/lihao-book/assets/js/27.6ee151aa.js"><link rel="prefetch" href="/lihao-book/assets/js/28.16f11f05.js"><link rel="prefetch" href="/lihao-book/assets/js/29.e595daeb.js"><link rel="prefetch" href="/lihao-book/assets/js/3.3bda7e9e.js"><link rel="prefetch" href="/lihao-book/assets/js/30.15005384.js"><link rel="prefetch" href="/lihao-book/assets/js/31.68311903.js"><link rel="prefetch" href="/lihao-book/assets/js/32.c413b9b1.js"><link rel="prefetch" href="/lihao-book/assets/js/33.ebaa5e3b.js"><link rel="prefetch" href="/lihao-book/assets/js/34.93062990.js"><link rel="prefetch" href="/lihao-book/assets/js/35.84866c98.js"><link rel="prefetch" href="/lihao-book/assets/js/36.0deaf777.js"><link rel="prefetch" href="/lihao-book/assets/js/37.a31cbca4.js"><link rel="prefetch" href="/lihao-book/assets/js/38.37fdf4d2.js"><link rel="prefetch" href="/lihao-book/assets/js/39.2bdd9640.js"><link rel="prefetch" href="/lihao-book/assets/js/4.189d4dcc.js"><link rel="prefetch" href="/lihao-book/assets/js/40.7fa92507.js"><link rel="prefetch" href="/lihao-book/assets/js/41.4b4f65c2.js"><link rel="prefetch" href="/lihao-book/assets/js/42.23a78624.js"><link rel="prefetch" href="/lihao-book/assets/js/43.c748bb36.js"><link rel="prefetch" href="/lihao-book/assets/js/44.1cf59294.js"><link rel="prefetch" href="/lihao-book/assets/js/45.d6caf45f.js"><link rel="prefetch" href="/lihao-book/assets/js/46.791bcf9b.js"><link rel="prefetch" href="/lihao-book/assets/js/47.511b7135.js"><link rel="prefetch" href="/lihao-book/assets/js/48.57d40c7f.js"><link rel="prefetch" href="/lihao-book/assets/js/49.f4e50841.js"><link rel="prefetch" href="/lihao-book/assets/js/5.b9a303b4.js"><link rel="prefetch" href="/lihao-book/assets/js/50.9ced9866.js"><link rel="prefetch" href="/lihao-book/assets/js/51.2900db23.js"><link rel="prefetch" href="/lihao-book/assets/js/52.143ccb79.js"><link rel="prefetch" href="/lihao-book/assets/js/53.f906840b.js"><link rel="prefetch" href="/lihao-book/assets/js/54.71f59ac8.js"><link rel="prefetch" href="/lihao-book/assets/js/55.1ca88fd5.js"><link rel="prefetch" href="/lihao-book/assets/js/56.4f076459.js"><link rel="prefetch" href="/lihao-book/assets/js/57.7b14b934.js"><link rel="prefetch" href="/lihao-book/assets/js/58.5e884722.js"><link rel="prefetch" href="/lihao-book/assets/js/59.aa65db5e.js"><link rel="prefetch" href="/lihao-book/assets/js/6.a47c4d7e.js"><link rel="prefetch" href="/lihao-book/assets/js/60.70f57642.js"><link rel="prefetch" href="/lihao-book/assets/js/61.8ea111da.js"><link rel="prefetch" href="/lihao-book/assets/js/62.b770f8b4.js"><link rel="prefetch" href="/lihao-book/assets/js/63.04946d0d.js"><link rel="prefetch" href="/lihao-book/assets/js/64.4a2bfce7.js"><link rel="prefetch" href="/lihao-book/assets/js/65.99d63ab9.js"><link rel="prefetch" href="/lihao-book/assets/js/66.8bbc7b6b.js"><link rel="prefetch" href="/lihao-book/assets/js/67.d43b1be4.js"><link rel="prefetch" href="/lihao-book/assets/js/68.90caf82a.js"><link rel="prefetch" href="/lihao-book/assets/js/69.b98b72b5.js"><link rel="prefetch" href="/lihao-book/assets/js/7.ab0fbb82.js"><link rel="prefetch" href="/lihao-book/assets/js/70.7f96a1c5.js"><link rel="prefetch" href="/lihao-book/assets/js/71.fbd806b8.js"><link rel="prefetch" href="/lihao-book/assets/js/72.bb790a69.js"><link rel="prefetch" href="/lihao-book/assets/js/73.972f8e47.js"><link rel="prefetch" href="/lihao-book/assets/js/74.c74ae0f3.js"><link rel="prefetch" href="/lihao-book/assets/js/75.63fe7d68.js"><link rel="prefetch" href="/lihao-book/assets/js/76.3f6689ca.js"><link rel="prefetch" href="/lihao-book/assets/js/77.c447bf93.js"><link rel="prefetch" href="/lihao-book/assets/js/78.8f3023d5.js"><link rel="prefetch" href="/lihao-book/assets/js/79.ee771c9d.js"><link rel="prefetch" href="/lihao-book/assets/js/8.d71d85dc.js"><link rel="prefetch" href="/lihao-book/assets/js/80.5a37dbeb.js"><link rel="prefetch" href="/lihao-book/assets/js/81.7dd62dde.js"><link rel="prefetch" href="/lihao-book/assets/js/82.d0cfbcc9.js"><link rel="prefetch" href="/lihao-book/assets/js/83.355f6b27.js"><link rel="prefetch" href="/lihao-book/assets/js/84.dcdca1de.js"><link rel="prefetch" href="/lihao-book/assets/js/85.9abd2690.js"><link rel="prefetch" href="/lihao-book/assets/js/86.3ac82bbc.js"><link rel="prefetch" href="/lihao-book/assets/js/87.edda11b9.js"><link rel="prefetch" href="/lihao-book/assets/js/88.45318fa1.js"><link rel="prefetch" href="/lihao-book/assets/js/89.9731b992.js"><link rel="prefetch" href="/lihao-book/assets/js/9.29fb7e74.js"><link rel="prefetch" href="/lihao-book/assets/js/90.c95f41fd.js"><link rel="prefetch" href="/lihao-book/assets/js/91.27f1cfd7.js"><link rel="prefetch" href="/lihao-book/assets/js/92.3462c66a.js"><link rel="prefetch" href="/lihao-book/assets/js/93.294ef7fe.js"><link rel="prefetch" href="/lihao-book/assets/js/94.0c73f5ee.js"><link rel="prefetch" href="/lihao-book/assets/js/95.679bc5b5.js"><link rel="prefetch" href="/lihao-book/assets/js/96.ececefdd.js"><link rel="prefetch" href="/lihao-book/assets/js/97.1158cc1e.js"><link rel="prefetch" href="/lihao-book/assets/js/98.3b170dee.js"><link rel="prefetch" href="/lihao-book/assets/js/99.a575163b.js">
    <link rel="stylesheet" href="/lihao-book/assets/css/0.styles.4cb38b6f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/lihao-book/" class="home-link router-link-active"><img src="/lihao-book/images/logo.png" alt="笔记" class="logo"> <span class="site-name can-hide">笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/lihao-book/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记集合" class="dropdown-title"><span class="title">笔记集合</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记集合" class="mobile-dropdown-title"><span class="title">笔记集合</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lihao-book/JavaScript/1.JS随笔.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Vue/Vue 修饰符.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/React/1、webpack 环境搭建.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Nodejs/tool.html" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Koa/1. 初识 Koa.html" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Webpack/1.Webpack 入门.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/CSS/BFC.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/前端/1.HTTP缓存.html" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/数据结构和算法/二分查找.html" class="nav-link">
  数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/其他/CI_CD.html" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏好书" class="dropdown-title"><span class="title">收藏好书</span> <span class="arrow down"></span></button> <button type="button" aria-label="收藏好书" class="mobile-dropdown-title"><span class="title">收藏好书</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lihao-book/ES6-阮一峰/[es6]1.ECMAScript.6.简介.html" class="nav-link">
  ES6 阮一峰
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/TypeScript-xcatliu/" class="nav-link router-link-active">
  TypeScript xcatliu
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="站点" class="dropdown-title"><span class="title">站点</span> <span class="arrow down"></span></button> <button type="button" aria-label="站点" class="mobile-dropdown-title"><span class="title">站点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://liu-lihao.gitee.io/lihao-book/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/liu-lihao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/lihao-book/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记集合" class="dropdown-title"><span class="title">笔记集合</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记集合" class="mobile-dropdown-title"><span class="title">笔记集合</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lihao-book/JavaScript/1.JS随笔.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Vue/Vue 修饰符.html" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/React/1、webpack 环境搭建.html" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Nodejs/tool.html" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Koa/1. 初识 Koa.html" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/Webpack/1.Webpack 入门.html" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/CSS/BFC.html" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/前端/1.HTTP缓存.html" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/数据结构和算法/二分查找.html" class="nav-link">
  数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/其他/CI_CD.html" class="nav-link">
  其他
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏好书" class="dropdown-title"><span class="title">收藏好书</span> <span class="arrow down"></span></button> <button type="button" aria-label="收藏好书" class="mobile-dropdown-title"><span class="title">收藏好书</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lihao-book/ES6-阮一峰/[es6]1.ECMAScript.6.简介.html" class="nav-link">
  ES6 阮一峰
</a></li><li class="dropdown-item"><!----> <a href="/lihao-book/TypeScript-xcatliu/" class="nav-link router-link-active">
  TypeScript xcatliu
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="站点" class="dropdown-title"><span class="title">站点</span> <span class="arrow down"></span></button> <button type="button" aria-label="站点" class="mobile-dropdown-title"><span class="title">站点</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://liu-lihao.gitee.io/lihao-book/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/liu-lihao" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/lihao-book/TypeScript-xcatliu/" aria-current="page" class="sidebar-link">TypeScript 入门教程</a></li><li><a href="/lihao-book/TypeScript-xcatliu/summary.html" class="sidebar-link">目录</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>介绍</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>进阶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>工程</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/lihao-book/TypeScript-xcatliu/engineering/" aria-current="page" class="sidebar-link">工程</a></li><li><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html" aria-current="page" class="active sidebar-link">代码检查</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#什么是代码检查" class="sidebar-link">什么是代码检查</a></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#为什么需要代码检查" class="sidebar-link">为什么需要代码检查</a></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#在-typescript-中使用-eslint" class="sidebar-link">在 TypeScript 中使用 ESLint</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#安装-eslint" class="sidebar-link">安装 ESLint</a></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#创建配置文件" class="sidebar-link">创建配置文件</a></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#检查一个-ts-文件" class="sidebar-link">检查一个 ts 文件</a></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#检查整个项目的-ts-文件" class="sidebar-link">检查整个项目的 ts 文件</a></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#在-vscode-中集成-eslint-检查" class="sidebar-link">在 VSCode 中集成 ESLint 检查</a></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#使用-prettier-修复格式错误" class="sidebar-link">使用 Prettier 修复格式错误</a></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#使用-alloyteam-的-eslint-配置" class="sidebar-link">使用 AlloyTeam 的 ESLint 配置</a></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#使用-eslint-检查-tsx-文件" class="sidebar-link">使用 ESLint 检查 tsx 文件</a></li></ul></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#troubleshootings" class="sidebar-link">Troubleshootings</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#cannot-find-module-typescript-eslint-parser" class="sidebar-link">Cannot find module '@typescript-eslint/parser'</a></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#vscode-没有显示出-eslint-的报错" class="sidebar-link">VSCode 没有显示出 ESLint 的报错</a></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#为什么有些定义了的变量-比如使用-enum-定义的变量-未使用-eslint-却没有报错" class="sidebar-link">为什么有些定义了的变量（比如使用 enum 定义的变量）未使用，ESLint 却没有报错？</a></li><li class="sidebar-sub-header"><a href="/lihao-book/TypeScript-xcatliu/engineering/lint.html#启用了-nounusedparameters-之后-只使用了第二个参数-但是又必须传入第一个参数-这就会报错了" class="sidebar-link">启用了 noUnusedParameters 之后，只使用了第二个参数，但是又必须传入第一个参数，这就会报错了</a></li></ul></li></ul></li><li><a href="/lihao-book/TypeScript-xcatliu/engineering/compiler-options.html" class="sidebar-link">编译选项</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>感谢</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="代码检查"><a href="#代码检查" class="header-anchor">#</a> 代码检查</h1> <p>2019 年 1 月，<a href="https://www.oschina.net/news/103818/future-typescript-eslint" target="_blank" rel="noopener noreferrer">TypeScirpt 官方决定全面采用 ESLint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 作为代码检查的工具，并创建了一个新项目 <a href="https://github.com/typescript-eslint/typescript-eslint" target="_blank" rel="noopener noreferrer">typescript-eslint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，提供了 TypeScript 文件的解析器 <a href="https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/parser" target="_blank" rel="noopener noreferrer">@typescript-eslint/parser<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和相关的配置选项 <a href="https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/eslint-plugin" target="_blank" rel="noopener noreferrer">@typescript-eslint/eslint-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等。而之前的两个 lint 解决方案都将弃用：</p> <ul><li><a href="https://github.com/eslint/typescript-eslint-parser" target="_blank" rel="noopener noreferrer">typescript-eslint-parser<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 已停止维护</li> <li><a href="https://palantir.github.io/tslint/" target="_blank" rel="noopener noreferrer">TSLint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 将提供迁移工具，并在 typescript-eslint 的功能足够完整后停止维护 TSLint（Once we consider ESLint feature-complete w.r.t. TSLint, we will deprecate TSLint and help users migrate to ESLint<sup><a href="https://medium.com/palantir/tslint-in-2019-1a144c2317a9" target="_blank" rel="noopener noreferrer">1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></sup>）</li></ul> <p>综上所述，目前以及将来的 TypeScript 的代码检查方案就是 <a href="https://github.com/typescript-eslint/typescript-eslint" target="_blank" rel="noopener noreferrer">typescript-eslint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="什么是代码检查"><a href="#什么是代码检查" class="header-anchor">#</a> 什么是代码检查</h2> <p>代码检查主要是用来发现代码错误、统一代码风格。</p> <p>在 JavaScript 项目中，我们一般使用 <a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">ESLint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来进行代码检查，它通过插件化的特性极大的丰富了适用范围，搭配 <a href="https://github.com/typescript-eslint/typescript-eslint" target="_blank" rel="noopener noreferrer">typescript-eslint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 之后，甚至可以用来检查 TypeScript 代码。</p> <h2 id="为什么需要代码检查"><a href="#为什么需要代码检查" class="header-anchor">#</a> 为什么需要代码检查</h2> <p>有人会觉得，JavaScript 非常灵活，所以需要代码检查。而 TypeScript 已经能够在编译阶段检查出很多问题了，为什么还需要代码检查呢？</p> <p>因为 TypeScript 关注的重心是类型的检查，而不是代码风格。当团队的人员越来越多时，同样的逻辑不同的人写出来可能会有很大的区别：</p> <ul><li>缩进应该是四个空格还是两个空格？</li> <li>是否应该禁用 <code>var</code>？</li> <li>接口名是否应该以 <code>I</code> 开头？</li> <li>是否应该强制使用 <code>===</code> 而不是 <code>==</code>？</li></ul> <p>这些问题 TypeScript 不会关注，但是却影响到多人协作开发时的效率、代码的可理解性以及可维护性。</p> <p>下面来看一个具体的例子：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">var</span> myName <span class="token operator">=</span> <span class="token string">'Tom'</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>myNane<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>myName<span class="token punctuation">.</span><span class="token function">toStrng</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>以上代码你能看出有什么错误吗？</p> <p>分别用 tsc 编译和 eslint 检查后，报错信息如下：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">var</span> myName <span class="token operator">=</span> <span class="token string">'Tom'</span><span class="token punctuation">;</span>
<span class="token comment">// eslint 报错信息：</span>
<span class="token comment">// Unexpected var, use let or const instead.eslint(no-var)</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>myNane<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// tsc 报错信息：</span>
<span class="token comment">// Cannot find name 'myNane'. Did you mean 'myName'?</span>
<span class="token comment">// eslint 报错信息：</span>
<span class="token comment">// 'myNane' is not defined.eslint(no-undef)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>myName<span class="token punctuation">.</span><span class="token function">toStrng</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// tsc 报错信息：</span>
<span class="token comment">// Property 'toStrng' does not exist on type 'string'. Did you mean 'toString'?</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><table><thead><tr><th>存在的问题</th> <th><code>tsc</code> 是否报错</th> <th><code>eslint</code> 是否报错</th></tr></thead> <tbody><tr><td>应该使用 <code>let</code> 或 <code>const</code> 而不是 <code>var</code></td> <td>❌</td> <td>✅</td></tr> <tr><td><code>myName</code> 被误写成了 <code>myNane</code></td> <td>✅</td> <td>✅</td></tr> <tr><td><code>toString</code> 被误写成了 <code>toStrng</code></td> <td>✅️</td> <td>❌</td></tr></tbody></table> <p>上例中，我们使用了 <code>var</code> 来定义一个变量，但其实 ES6 中有更先进的语法 <code>let</code> 和 <code>const</code>，此时就可以通过 <code>eslint</code> 检查出来，提示我们应该使用 <code>let</code> 或 <code>const</code> 而不是 <code>var</code>。</p> <p>对于未定义的变量 <code>myNane</code>，<code>tsc</code> 和 <code>eslint</code> 都可以检查出来。</p> <p>由于 <code>eslint</code> 无法识别 <code>myName</code> 存在哪些方法，所以对于拼写错误的 <code>toString</code> 没有检查出来。</p> <p>由此可见，<code>eslint</code> 能够发现出一些 <code>tsc</code> 不会关心的错误，检查出一些潜在的问题，所以代码检查还是非常重要的。</p> <h2 id="在-typescript-中使用-eslint"><a href="#在-typescript-中使用-eslint" class="header-anchor">#</a> 在 TypeScript 中使用 ESLint</h2> <h3 id="安装-eslint"><a href="#安装-eslint" class="header-anchor">#</a> 安装 ESLint</h3> <p>ESLint 可以安装在当前项目中或全局环境下，因为代码检查是项目的重要组成部分，所以我们一般会将它安装在当前项目中。可以运行下面的脚本来安装：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev eslint
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>由于 ESLint 默认使用 <a href="https://github.com/eslint/espree" target="_blank" rel="noopener noreferrer">Espree<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 进行语法解析，无法识别 TypeScript 的一些语法，故我们需要安装 <a href="https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/parser" target="_blank" rel="noopener noreferrer"><code>@typescript-eslint/parser</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，替代掉默认的解析器，别忘了同时安装 <code>typescript</code>：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev typescript @typescript-eslint/parser
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>接下来需要安装对应的插件 <a href="https://github.com/typescript-eslint/typescript-eslint/tree/master/packages/eslint-plugin" target="_blank" rel="noopener noreferrer">@typescript-eslint/eslint-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 它作为 eslint 默认规则的补充，提供了一些额外的适用于 ts 语法的规则。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev @typescript-eslint/eslint-plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="创建配置文件"><a href="#创建配置文件" class="header-anchor">#</a> 创建配置文件</h3> <p>ESLint 需要一个配置文件来决定对哪些规则进行检查，配置文件的名称一般是 <code>.eslintrc.js</code> 或 <code>.eslintrc.json</code>。</p> <p>当运行 ESLint 的时候检查一个文件的时候，它会首先尝试读取该文件的目录下的配置文件，然后再一级一级往上查找，将所找到的配置合并起来，作为当前被检查文件的配置。</p> <p>我们在项目的根目录下创建一个 <code>.eslintrc.js</code>，内容如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    parser<span class="token operator">:</span> <span class="token string">'@typescript-eslint/parser'</span><span class="token punctuation">,</span>
    plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@typescript-eslint'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    rules<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 禁止使用 var</span>
        <span class="token string">'no-var'</span><span class="token operator">:</span> <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// 优先使用 interface 而不是 type</span>
        <span class="token string">'@typescript-eslint/consistent-type-definitions'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;interface&quot;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>以上配置中，我们指定了两个规则，其中 <code>no-var</code> 是 ESLint 原生的规则，<code>@typescript-eslint/consistent-type-definitions</code> 是 <code>@typescript-eslint/eslint-plugin</code> 新增的规则。</p> <p>规则的取值一般是一个数组（上例中的 <code>@typescript-eslint/consistent-type-definitions</code>），其中第一项是 <code>off</code>、<code>warn</code> 或 <code>error</code> 中的一个，表示关闭、警告和报错。后面的项都是该规则的其他配置。</p> <p>如果没有其他配置的话，则可以将规则的取值简写为数组中的第一项（上例中的 <code>no-var</code>）。</p> <p>关闭、警告和报错的含义如下：</p> <ul><li>关闭：禁用此规则</li> <li>警告：代码检查时输出错误信息，但是不会影响到 exit code</li> <li>报错：发现错误时，不仅会输出错误信息，而且 exit code 将被设为 1（一般 exit code 不为 0 则表示执行出现错误）</li></ul> <h3 id="检查一个-ts-文件"><a href="#检查一个-ts-文件" class="header-anchor">#</a> 检查一个 ts 文件</h3> <p>创建了配置文件之后，我们来创建一个 ts 文件看看是否能用 ESLint 去检查它。</p> <p>创建一个新文件 <code>index.ts</code>，将以下内容复制进去：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">var</span> myName <span class="token operator">=</span> <span class="token string">'Tom'</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>然后执行以下命令：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>./node_modules/.bin/eslint index.ts
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>则会得到如下报错信息：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>/path/to/index.ts
  <span class="token number">1</span>:1  error  Unexpected var, use <span class="token builtin class-name">let</span> or const instead  no-var
  <span class="token number">3</span>:6  error  Use an <span class="token variable"><span class="token variable">`</span>interface<span class="token variable">`</span></span> instead of a <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">type</span><span class="token variable">`</span></span>    @typescript-eslint/consistent-type-definitions

✖ <span class="token number">2</span> problems <span class="token punctuation">(</span><span class="token number">2</span> errors, <span class="token number">0</span> warnings<span class="token punctuation">)</span>
  <span class="token number">2</span> errors and <span class="token number">0</span> warnings potentially fixable with the <span class="token variable"><span class="token variable">`</span>--fix<span class="token variable">`</span></span> option.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上面的结果显示，刚刚配置的两个规则都生效了：禁止使用 <code>var</code>；优先使用 <code>interface</code> 而不是 <code>type</code>。</p> <p>需要注意的是，我们使用的是 <code>./node_modules/.bin/eslint</code>，而不是全局的 <code>eslint</code> 脚本，这是因为代码检查是项目的重要组成部分，所以我们一般会将它安装在当前项目中。</p> <p>可是每次执行这么长一段脚本颇有不便，我们可以通过在 <code>package.json</code> 中添加一个 <code>script</code> 来创建一个 npm script 来简化这个步骤：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint index.ts&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这时只需执行 <code>npm run eslint</code> 即可。</p> <h3 id="检查整个项目的-ts-文件"><a href="#检查整个项目的-ts-文件" class="header-anchor">#</a> 检查整个项目的 ts 文件</h3> <p>我们的项目源文件一般是放在 <code>src</code> 目录下，所以需要将 <code>package.json</code> 中的 <code>eslint</code> 脚本改为对一个目录进行检查。由于 <code>eslint</code> 默认不会检查 <code>.ts</code> 后缀的文件，所以需要加上参数 <code>--ext .ts</code>：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src --ext .ts&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>此时执行 <code>npm run eslint</code> 即会检查 <code>src</code> 目录下的所有 <code>.ts</code> 后缀的文件。</p> <h3 id="在-vscode-中集成-eslint-检查"><a href="#在-vscode-中集成-eslint-检查" class="header-anchor">#</a> 在 VSCode 中集成 ESLint 检查</h3> <p>在编辑器中集成 ESLint 检查，可以在开发过程中就发现错误，甚至可以在保存时自动修复错误，极大的增加了开发效率。</p> <p>要在 VSCode 中集成 ESLint 检查，我们需要先安装 ESLint 插件，点击「扩展」按钮，搜索 ESLint，然后安装即可。</p> <p>VSCode 中的 ESLint 插件默认是不会检查 <code>.ts</code> 后缀的，需要在「文件 =&gt; 首选项 =&gt; 设置 =&gt; 工作区」中（也可以在项目根目录下创建一个配置文件 <code>.vscode/settings.json</code>），添加以下配置：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;eslint.validate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;javascriptreact&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;typescript&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;typescript.tsdk&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node_modules/typescript/lib&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>这时再打开一个 <code>.ts</code> 文件，将鼠标移到红色提示处，即可看到这样的报错信息了：</p> <p><img src="/lihao-book/assets/img/vscode-eslint-error.b2dd4096.png" alt="VSCode ESLint 错误信息"></p> <p>我们还可以开启保存时自动修复的功能，通过配置：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;eslint.autoFixOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint.validate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;javascriptreact&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;language&quot;</span><span class="token operator">:</span> <span class="token string">&quot;typescript&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;autoFix&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;typescript.tsdk&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node_modules/typescript/lib&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>就可以在保存文件后，自动修复为：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">let</span> myName <span class="token operator">=</span> <span class="token string">'Tom'</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="使用-prettier-修复格式错误"><a href="#使用-prettier-修复格式错误" class="header-anchor">#</a> 使用 Prettier 修复格式错误</h3> <p>ESLint 包含了一些代码格式的检查，比如空格、分号等。但前端社区中有一个更先进的工具可以用来格式化代码，那就是 <a href="https://prettier.io/" target="_blank" rel="noopener noreferrer">Prettier<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>Prettier 聚焦于代码的格式化，通过语法分析，重新整理代码的格式，让所有人的代码都保持同样的风格。</p> <p>首先需要安装 Prettier：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev prettier
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后创建一个 <code>prettier.config.js</code> 文件，里面包含 Prettier 的配置项。Prettier 的配置项很少，这里我推荐大家一个配置规则，作为参考：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// prettier.config.js or .prettierrc.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 一行最多 100 字符</span>
    printWidth<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token comment">// 使用 4 个空格缩进</span>
    tabWidth<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token comment">// 不使用缩进符，而使用空格</span>
    useTabs<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 行尾需要有分号</span>
    semi<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 使用单引号</span>
    singleQuote<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 对象的 key 仅在必要时用引号</span>
    quoteProps<span class="token operator">:</span> <span class="token string">'as-needed'</span><span class="token punctuation">,</span>
    <span class="token comment">// jsx 不使用单引号，而使用双引号</span>
    jsxSingleQuote<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 末尾不需要逗号</span>
    trailingComma<span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
    <span class="token comment">// 大括号内的首尾需要空格</span>
    bracketSpacing<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// jsx 标签的反尖括号需要换行</span>
    jsxBracketSameLine<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 箭头函数，只有一个参数的时候，也需要括号</span>
    arrowParens<span class="token operator">:</span> <span class="token string">'always'</span><span class="token punctuation">,</span>
    <span class="token comment">// 每个文件格式化的范围是文件的全部内容</span>
    rangeStart<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    rangeEnd<span class="token operator">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
    <span class="token comment">// 不需要写文件开头的 @prettier</span>
    requirePragma<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 不需要自动在文件开头插入 @prettier</span>
    insertPragma<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 使用默认的折行标准</span>
    proseWrap<span class="token operator">:</span> <span class="token string">'preserve'</span><span class="token punctuation">,</span>
    <span class="token comment">// 根据显示样式决定 html 要不要折行</span>
    htmlWhitespaceSensitivity<span class="token operator">:</span> <span class="token string">'css'</span><span class="token punctuation">,</span>
    <span class="token comment">// 换行符使用 lf</span>
    endOfLine<span class="token operator">:</span> <span class="token string">'lf'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>接下来安装 VSCode 中的 Prettier 插件，然后修改 <code>.vscode/settings.json</code>：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;files.eol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;editor.tabSize&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token property">&quot;editor.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint.autoFixOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint.validate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;javascriptreact&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;language&quot;</span><span class="token operator">:</span> <span class="token string">&quot;typescript&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;autoFix&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;typescript.tsdk&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node_modules/typescript/lib&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>这样就实现了保存文件时自动格式化并且自动修复 ESLint 错误。</p> <p>需要注意的是，由于 ESLint 也可以检查一些代码格式的问题，所以在和 Prettier 配合使用时，我们一般会把 ESLint 中的代码格式相关的规则禁用掉，否则就会有冲突了。</p> <h3 id="使用-alloyteam-的-eslint-配置"><a href="#使用-alloyteam-的-eslint-配置" class="header-anchor">#</a> 使用 AlloyTeam 的 ESLint 配置</h3> <p>ESLint 原生的规则和 <code>@typescript-eslint/eslint-plugin</code> 的规则太多了，而且原生的规则有一些在 TypeScript 中支持的不好，需要禁用掉。</p> <p>这里我推荐使用 <a href="https://github.com/AlloyTeam/eslint-config-alloy#typescript" target="_blank" rel="noopener noreferrer">AlloyTeam ESLint 规则中的 TypeScript 版本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，它已经为我们提供了一套完善的配置规则，并且与 Prettier 是完全兼容的（eslint-config-alloy 不包含任何代码格式的规则，代码格式的问题交给更专业的 Prettier 去处理）。</p> <p>安装：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev eslint typescript @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-config-alloy
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在你的项目根目录下创建 <code>.eslintrc.js</code>，并将以下内容复制到文件中即可：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'alloy'</span><span class="token punctuation">,</span>
        <span class="token string">'alloy/typescript'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    env<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 您的环境变量（包含多个预定义的全局变量）</span>
        <span class="token comment">// Your environments (which contains several predefined global variables)</span>
        <span class="token comment">//</span>
        <span class="token comment">// browser: true,</span>
        <span class="token comment">// node: true,</span>
        <span class="token comment">// mocha: true,</span>
        <span class="token comment">// jest: true,</span>
        <span class="token comment">// jquery: true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    globals<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 您的全局变量（设置为 false 表示它不允许被重新赋值）</span>
        <span class="token comment">// Your global variables (setting to false means it's not allowed to be reassigned)</span>
        <span class="token comment">//</span>
        <span class="token comment">// myGlobal: false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    rules<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 自定义您的规则</span>
        <span class="token comment">// Customize your rules</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>更多的使用方法，请参考 <a href="https://github.com/AlloyTeam/eslint-config-alloy" target="_blank" rel="noopener noreferrer">AlloyTeam ESLint 规则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="使用-eslint-检查-tsx-文件"><a href="#使用-eslint-检查-tsx-文件" class="header-anchor">#</a> 使用 ESLint 检查 tsx 文件</h3> <p>如果需要同时支持对 tsx 文件的检查，则需要对以上步骤做一些调整：</p> <h4 id="安装-eslint-plugin-react"><a href="#安装-eslint-plugin-react" class="header-anchor">#</a> 安装 <code>eslint-plugin-react</code></h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev eslint-plugin-react
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="package-json-中的-scripts-eslint-添加-tsx-后缀"><a href="#package-json-中的-scripts-eslint-添加-tsx-后缀" class="header-anchor">#</a> package.json 中的 scripts.eslint 添加 <code>.tsx</code> 后缀</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src --ext .ts,.tsx&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="vscode-的配置中新增-typescriptreact-检查"><a href="#vscode-的配置中新增-typescriptreact-检查" class="header-anchor">#</a> VSCode 的配置中新增 typescriptreact 检查</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;files.eol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;editor.tabSize&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token property">&quot;editor.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint.autoFixOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint.validate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;javascriptreact&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;language&quot;</span><span class="token operator">:</span> <span class="token string">&quot;typescript&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;autoFix&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;language&quot;</span><span class="token operator">:</span> <span class="token string">&quot;typescriptreact&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;autoFix&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;typescript.tsdk&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node_modules/typescript/lib&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="使用-alloyteam-eslint-规则中的-typescript-react-版本"><a href="#使用-alloyteam-eslint-规则中的-typescript-react-版本" class="header-anchor">#</a> 使用 AlloyTeam ESLint 规则中的 TypeScript React 版本</h4> <p><a href="https://github.com/AlloyTeam/eslint-config-alloy#typescript-react" target="_blank" rel="noopener noreferrer">AlloyTeam ESLint 规则中的 TypeScript React 版本<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="troubleshootings"><a href="#troubleshootings" class="header-anchor">#</a> Troubleshootings</h2> <h3 id="cannot-find-module-typescript-eslint-parser"><a href="#cannot-find-module-typescript-eslint-parser" class="header-anchor">#</a> Cannot find module '@typescript-eslint/parser'</h3> <p>你运行的是全局的 eslint，需要改为运行 <code>./node_modules/.bin/eslint</code>。</p> <h3 id="vscode-没有显示出-eslint-的报错"><a href="#vscode-没有显示出-eslint-的报错" class="header-anchor">#</a> VSCode 没有显示出 ESLint 的报错</h3> <ol><li>检查「文件 =&gt; 首选项 =&gt; 设置」中有没有配置正确</li> <li>检查必要的 npm 包有没有安装</li> <li>检查 <code>.eslintrc.js</code> 有没有配置</li> <li>检查文件是不是在 <code>.eslintignore</code> 中</li></ol> <p>如果以上步骤都不奏效，则可以在「文件 =&gt; 首选项 =&gt; 设置」中配置 <code>&quot;eslint.trace.server&quot;: &quot;messages&quot;</code>，按 <code>Ctrl</code>+<code>Shift</code>+<code>U</code> 打开输出面板，然后选择 ESLint 输出，查看具体错误。</p> <p><img src="/lihao-book/assets/img/vscode-output-eslint.73c10a27.png" alt="VSCode 的 ESLint 输出"></p> <h3 id="为什么有些定义了的变量-比如使用-enum-定义的变量-未使用-eslint-却没有报错"><a href="#为什么有些定义了的变量-比如使用-enum-定义的变量-未使用-eslint-却没有报错" class="header-anchor">#</a> 为什么有些定义了的变量（比如使用 <code>enum</code> 定义的变量）未使用，ESLint 却没有报错？</h3> <p>因为无法支持这种变量定义的检查。建议在 <code>tsconfig.json</code> 中添加以下配置，使 <code>tsc</code> 编译过程能够检查出定义了未使用的变量：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;noUnusedLocals&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;noUnusedParameters&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="启用了-nounusedparameters-之后-只使用了第二个参数-但是又必须传入第一个参数-这就会报错了"><a href="#启用了-nounusedparameters-之后-只使用了第二个参数-但是又必须传入第一个参数-这就会报错了" class="header-anchor">#</a> 启用了 noUnusedParameters 之后，只使用了第二个参数，但是又必须传入第一个参数，这就会报错了</h3> <p>第一个参数以下划线开头即可，参考 https://github.com/Microsoft/TypeScript/issues/9458</p> <hr> <ul><li><a href="/lihao-book/TypeScript-xcatliu/engineering/" class="router-link-active">上一章：工程</a></li> <li><a href="/lihao-book/TypeScript-xcatliu/engineering/compiler-options.html">下一章：编译选项</a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/7/29 下午4:45:25</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/lihao-book/TypeScript-xcatliu/engineering/" class="prev router-link-active">
        工程
      </a></span> <span class="next"><a href="/lihao-book/TypeScript-xcatliu/engineering/compiler-options.html">
        编译选项
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/lihao-book/assets/js/app.a7784270.js" defer></script><script src="/lihao-book/assets/js/2.cc29f35f.js" defer></script><script src="/lihao-book/assets/js/17.5a94abc0.js" defer></script><script src="/lihao-book/assets/js/13.b9e03290.js" defer></script>
  </body>
</html>
