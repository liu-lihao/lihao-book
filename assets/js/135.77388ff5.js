(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{532:function(t,e,s){"use strict";s.r(e);var n=s(46),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"rollup-插件开发-英"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rollup-插件开发-英"}},[t._v("#")]),t._v(" rollup 插件开发(英)")]),t._v(" "),s("blockquote",[s("p",[t._v("Plugin Development")])]),t._v(" "),s("h2",{attrs:{id:"plugins-overview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugins-overview"}},[t._v("#")]),t._v(" Plugins Overview")]),t._v(" "),s("p",[t._v("A Rollup plugin is an object with one or more of the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#properties",target:"_blank",rel:"noopener noreferrer"}},[t._v("properties"),s("OutboundLink")],1),t._v(", "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#build-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("build hooks"),s("OutboundLink")],1),t._v(", and "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#output-generation-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("output generation hooks"),s("OutboundLink")],1),t._v(" described below, and which follows our "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#conventions",target:"_blank",rel:"noopener noreferrer"}},[t._v("conventions"),s("OutboundLink")],1),t._v(". A plugin should be distributed as a package which exports a function that can be called with plugin specific options and returns such an object.")]),t._v(" "),s("p",[t._v("Plugins allow you to customise Rollup's behaviour by, for example, transpiling code before bundling, or finding third-party modules in your "),s("code",[t._v("node_modules")]),t._v(" folder. For an example on how to use them, see "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#using-plugins",target:"_blank",rel:"noopener noreferrer"}},[t._v("Using plugins"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("A List of Plugins may be found at "),s("a",{attrs:{href:"https://github.com/rollup/awesome",target:"_blank",rel:"noopener noreferrer"}},[t._v("github.com/rollup/awesome"),s("OutboundLink")],1),t._v(". If you would like to make a suggestion for a plugin, please submit a Pull Request.")]),t._v(" "),s("h2",{attrs:{id:"a-simple-example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#a-simple-example"}},[t._v("#")]),t._v(" A Simple Example")]),t._v(" "),s("p",[t._v("The following plugin will intercept any imports of "),s("code",[t._v("virtual-module")]),t._v(" without accessing the file system. This is for instance necessary if you want to use Rollup in a browser. It can even be used to replace entry points as shown in the example.")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rollup-plugin-my-example.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("myExample")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-example'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this name will show up in warnings and errors")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'virtual-module'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" source "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this signals that rollup should not ask other plugins or check the file system to find this id")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// other ids should be handled as usually")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'virtual-module'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'export default \"This is virtual!\"'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// the source code for "virtual-module"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// other ids should be handled as usually")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rollup.config.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" myExample "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./rollup-plugin-my-example.js'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  input"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'virtual-module'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// resolved by our plugin")]),t._v("\n  plugins"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("myExample")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      format"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'es'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br")])]),s("h2",{attrs:{id:"conventions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#conventions"}},[t._v("#")]),t._v(" Conventions")]),t._v(" "),s("ul",[s("li",[t._v("Plugins should have a clear name with "),s("code",[t._v("rollup-plugin-")]),t._v(" prefix.")]),t._v(" "),s("li",[t._v("Include "),s("code",[t._v("rollup-plugin")]),t._v(" keyword in "),s("code",[t._v("package.json")]),t._v(".")]),t._v(" "),s("li",[t._v("Plugins should be tested. We recommend "),s("a",{attrs:{href:"https://github.com/mochajs/mocha",target:"_blank",rel:"noopener noreferrer"}},[t._v("mocha"),s("OutboundLink")],1),t._v(" or "),s("a",{attrs:{href:"https://github.com/avajs/ava",target:"_blank",rel:"noopener noreferrer"}},[t._v("ava"),s("OutboundLink")],1),t._v(" which support promises out of the box.")]),t._v(" "),s("li",[t._v("Use asynchronous methods when it is possible.")]),t._v(" "),s("li",[t._v("Document your plugin in English.")]),t._v(" "),s("li",[t._v("Make sure your plugin outputs correct source mappings if appropriate.")]),t._v(" "),s("li",[t._v("If your plugin uses 'virtual modules' (e.g. for helper functions), prefix the module ID with "),s("code",[t._v("\\0")]),t._v(". This prevents other plugins from trying to process it.")])]),t._v(" "),s("h2",{attrs:{id:"properties"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#properties"}},[t._v("#")]),t._v(" Properties")]),t._v(" "),s("h3",{attrs:{id:"name"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#name"}},[t._v("#")]),t._v(" "),s("code",[t._v("name")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("string")])]),t._v(" "),s("p",[t._v("The name of the plugin, for use in error messages and warnings.")]),t._v(" "),s("h2",{attrs:{id:"build-hooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#build-hooks"}},[t._v("#")]),t._v(" Build Hooks")]),t._v(" "),s("p",[t._v("To interact with the build process, your plugin object includes 'hooks'. Hooks are functions which are called at various stages of the build. Hooks can affect how a build is run, provide information about a build, or modify a build once complete. There are different kinds of hooks:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("async")]),t._v(": The hook may also return a promise resolving to the same type of value; otherwise, the hook is marked as "),s("code",[t._v("sync")]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("first")]),t._v(": If several plugins implement this hook, the hooks are run sequentially until a hook returns a value other than "),s("code",[t._v("null")]),t._v(" or "),s("code",[t._v("undefined")]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("sequential")]),t._v(": If several plugins implement this hook, all of them will be run in the specified plugin order. If a hook is async, subsequent hooks of this kind will wait until the current hook is resolved.")]),t._v(" "),s("li",[s("code",[t._v("parallel")]),t._v(": If several plugins implement this hook, all of them will be run in the specified plugin order. If a hook is async, subsequent hooks of this kind will be run in parallel and not wait for the current hook.")])]),t._v(" "),s("p",[t._v("Build hooks are run during the build phase, which is triggered by "),s("code",[t._v("rollup.rollup(inputOptions)")]),t._v(". They are mainly concerned with locating, providing and transforming input files before they are processed by Rollup. The first hook of the build phase is "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#options",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("options")]),s("OutboundLink")],1),t._v(", the last one is always "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#buildend",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("buildEnd")]),s("OutboundLink")],1),t._v(", unless there is a build error in which case "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#closebundle",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("closeBundle")]),s("OutboundLink")],1),t._v(" will be called after that.")]),t._v(" "),s("p",[t._v("Additionally, in watch mode the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#watchchange",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("watchChange")]),s("OutboundLink")],1),t._v(" hook can be triggered at any time to notify a new run will be triggered once the current run has generated its outputs. Also, when watcher closes, the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#closewatcher",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("closeWatcher")]),s("OutboundLink")],1),t._v(" hook will be triggered.")]),t._v(" "),s("p",[t._v("See "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#output-generation-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("Output Generation Hooks"),s("OutboundLink")],1),t._v(" for hooks that run during the output generation phase to modify the generated output.")]),t._v(" "),s("h3",{attrs:{id:"buildend"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#buildend"}},[t._v("#")]),t._v(" "),s("code",[t._v("buildEnd")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(error?: Error) => void")]),t._v("\nKind: "),s("code",[t._v("async, parallel")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#moduleparsed",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("moduleParsed")]),s("OutboundLink")],1),t._v(", "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolveid",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveId")]),s("OutboundLink")],1),t._v(" or "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolvedynamicimport",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveDynamicImport")]),s("OutboundLink")],1),t._v(".\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputoptions",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("outputOptions")]),s("OutboundLink")],1),t._v(" in the output generation phase as this is the last hook of the build phase.")]),t._v(" "),s("p",[t._v("Called when rollup has finished bundling, but before "),s("code",[t._v("generate")]),t._v(" or "),s("code",[t._v("write")]),t._v(" is called; you can also return a Promise. If an error occurred during the build, it is passed on to this hook.")]),t._v(" "),s("h3",{attrs:{id:"buildstart"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#buildstart"}},[t._v("#")]),t._v(" "),s("code",[t._v("buildStart")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(options: InputOptions) => void")]),t._v("\nKind: "),s("code",[t._v("async, parallel")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#options",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("options")]),s("OutboundLink")],1),t._v("\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolveid",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveId")]),s("OutboundLink")],1),t._v(" to resolve each entry point in parallel.")]),t._v(" "),s("p",[t._v("Called on each "),s("code",[t._v("rollup.rollup")]),t._v(" build. This is the recommended hook to use when you need access to the options passed to "),s("code",[t._v("rollup.rollup()")]),t._v(" as it takes the transformations by all "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#options",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("options")]),s("OutboundLink")],1),t._v(" hooks into account and also contains the right default values for unset options.")]),t._v(" "),s("h3",{attrs:{id:"closewatcher"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#closewatcher"}},[t._v("#")]),t._v(" "),s("code",[t._v("closeWatcher")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("() => void")]),t._v("\nKind: "),s("code",[t._v("sync, sequential")]),t._v("\nPrevious/Next Hook: This hook can be triggered at any time both during the build and the output generation phases. If that is the case, the current build will still proceed but no new "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#watchchange",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("watchChange")]),s("OutboundLink")],1),t._v(" events will be triggered ever.")]),t._v(" "),s("p",[t._v("Notifies a plugin when watcher process closes and all open resources should be closed too. This hook cannot be used by output plugins.")]),t._v(" "),s("h3",{attrs:{id:"load"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#load"}},[t._v("#")]),t._v(" "),s("code",[t._v("load")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v('(id: string) => string | null | {code: string, map?: string | SourceMap, ast? : ESTree.Program, moduleSideEffects?: boolean | "no-treeshake" | null, syntheticNamedExports?: boolean | string | null, meta?: {[plugin: string]: any} | null}')]),t._v("\nKind: "),s("code",[t._v("async, first")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolveid",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveId")]),s("OutboundLink")],1),t._v(" or "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolvedynamicimport",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveDynamicImport")]),s("OutboundLink")],1),t._v(" where the loaded id was resolved.\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#transform",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("transform")]),s("OutboundLink")],1),t._v(" to transform the loaded file.")]),t._v(" "),s("p",[t._v("Defines a custom loader. Returning "),s("code",[t._v("null")]),t._v(" defers to other "),s("code",[t._v("load")]),t._v(" functions (and eventually the default behavior of loading from the file system). To prevent additional parsing overhead in case e.g. this hook already used "),s("code",[t._v("this.parse")]),t._v(" to generate an AST for some reason, this hook can optionally return a "),s("code",[t._v("{ code, ast, map }")]),t._v(" object. The "),s("code",[t._v("ast")]),t._v(" must be a standard ESTree AST with "),s("code",[t._v("start")]),t._v(" and "),s("code",[t._v("end")]),t._v(" properties for each node. If the transformation does not move code, you can preserve existing sourcemaps by setting "),s("code",[t._v("map")]),t._v(" to "),s("code",[t._v("null")]),t._v(". Otherwise you might need to generate the source map. See "),s("a",{attrs:{href:"https://rollupjs.org/#source-code-transformations",target:"_blank",rel:"noopener noreferrer"}},[t._v("the section on source code transformations"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("If "),s("code",[t._v("false")]),t._v(" is returned for "),s("code",[t._v("moduleSideEffects")]),t._v(" and no other module imports anything from this module, then this module will not be included in the bundle even if the module would have side-effects. If "),s("code",[t._v("true")]),t._v(" is returned, Rollup will use its default algorithm to include all statements in the module that have side-effects (such as modifying a global or exported variable). If "),s("code",[t._v('"no-treeshake"')]),t._v(" is returned, treeshaking will be turned off for this module and it will also be included in one of the generated chunks even if it is empty. If "),s("code",[t._v("null")]),t._v(" is returned or the flag is omitted, then "),s("code",[t._v("moduleSideEffects")]),t._v(" will be determined by the first "),s("code",[t._v("resolveId")]),t._v(" hook that resolved this module, the "),s("code",[t._v("treeshake.moduleSideEffects")]),t._v(" option, or eventually default to "),s("code",[t._v("true")]),t._v(". The "),s("code",[t._v("transform")]),t._v(" hook can override this.")]),t._v(" "),s("p",[t._v("See "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#synthetic-named-exports",target:"_blank",rel:"noopener noreferrer"}},[t._v("synthetic named exports"),s("OutboundLink")],1),t._v(" for the effect of the "),s("code",[t._v("syntheticNamedExports")]),t._v(" option. If "),s("code",[t._v("null")]),t._v(" is returned or the flag is omitted, then "),s("code",[t._v("syntheticNamedExports")]),t._v(" will be determined by the first "),s("code",[t._v("resolveId")]),t._v(" hook that resolved this module or eventually default to "),s("code",[t._v("false")]),t._v(". The "),s("code",[t._v("transform")]),t._v(" hook can override this.")]),t._v(" "),s("p",[t._v("See "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#custom-module-meta-data",target:"_blank",rel:"noopener noreferrer"}},[t._v("custom module meta-data"),s("OutboundLink")],1),t._v(" for how to use the "),s("code",[t._v("meta")]),t._v(" option. If a "),s("code",[t._v("meta")]),t._v(" object is returned by this hook, it will be merged shallowly with any "),s("code",[t._v("meta")]),t._v(" object returned by the resolveId hook. If no hook returns a "),s("code",[t._v("meta")]),t._v(" object it will default to an empty object. The "),s("code",[t._v("transform")]),t._v(" hook can further add or replace properties of this object.")]),t._v(" "),s("p",[t._v("You can use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisgetmoduleinfomoduleid-string--moduleinfo--null",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.getModuleInfo")]),s("OutboundLink")],1),t._v(" to find out the previous values of "),s("code",[t._v("moduleSideEffects")]),t._v(", "),s("code",[t._v("syntheticNamedExports")]),t._v(" and "),s("code",[t._v("meta")]),t._v(" inside this hook.")]),t._v(" "),s("h3",{attrs:{id:"moduleparsed"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#moduleparsed"}},[t._v("#")]),t._v(" "),s("code",[t._v("moduleParsed")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(moduleInfo: ModuleInfo) => void")]),t._v("\nKind: "),s("code",[t._v("async, parallel")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#transform",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("transform")]),s("OutboundLink")],1),t._v(" where the currently handled file was transformed.\nNextHook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolveid",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveId")]),s("OutboundLink")],1),t._v(" and "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolvedynamicimport",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveDynamicImport")]),s("OutboundLink")],1),t._v(" to resolve all discovered static and dynamic imports in parallel if present, otherwise "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#buildend",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("buildEnd")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("This hook is called each time a module has been fully parsed by Rollup. See "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisgetmoduleinfomoduleid-string--moduleinfo--null",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.getModuleInfo")]),s("OutboundLink")],1),t._v(" for what information is passed to this hook.")]),t._v(" "),s("p",[t._v("In contrast to the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#transform",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("transform")]),s("OutboundLink")],1),t._v(" hook, this hook is never cached and can be used to get information about both cached and other modules, including the final shape of the "),s("code",[t._v("meta")]),t._v(" property, the "),s("code",[t._v("code")]),t._v(" and the "),s("code",[t._v("ast")]),t._v(".")]),t._v(" "),s("p",[t._v("Note that information about imported modules is not yet available in this hook, and information about importing modules may be incomplete as additional importers could be discovered later. If you need this information, use the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#buildend",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("buildEnd")]),s("OutboundLink")],1),t._v(" hook.")]),t._v(" "),s("h3",{attrs:{id:"options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#options"}},[t._v("#")]),t._v(" "),s("code",[t._v("options")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(options: InputOptions) => InputOptions | null")]),t._v("\nKind: "),s("code",[t._v("async, sequential")]),t._v("\nPrevious Hook: This is the first hook of the build phase.\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#buildstart",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("buildStart")]),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("Replaces or manipulates the options object passed to "),s("code",[t._v("rollup.rollup")]),t._v(". Returning "),s("code",[t._v("null")]),t._v(" does not replace anything. If you just need to read the options, it is recommended to use the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#buildstart",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("buildStart")]),s("OutboundLink")],1),t._v(" hook as that hook has access to the options after the transformations from all "),s("code",[t._v("options")]),t._v(" hooks have been taken into account.")]),t._v(" "),s("p",[t._v("This is the only hook that does not have access to most "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#plugin-context",target:"_blank",rel:"noopener noreferrer"}},[t._v("plugin context"),s("OutboundLink")],1),t._v(" utility functions as it is run before rollup is fully configured.")]),t._v(" "),s("h3",{attrs:{id:"resolvedynamicimport"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resolvedynamicimport"}},[t._v("#")]),t._v(" "),s("code",[t._v("resolveDynamicImport")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(specifier: string | ESTree.Node, importer: string) => string | false | null | {id: string, external?: boolean}")]),t._v("\nKind: "),s("code",[t._v("async, first")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#moduleparsed",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("moduleParsed")]),s("OutboundLink")],1),t._v(" for the importing file.\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#load",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("load")]),s("OutboundLink")],1),t._v(" if the hook resolved with an id that has not yet been loaded, "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolveid",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveId")]),s("OutboundLink")],1),t._v(" if the dynamic import contains a string and was not resolved by the hook, otherwise "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#buildend",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("buildEnd")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Defines a custom resolver for dynamic imports. Returning "),s("code",[t._v("false")]),t._v(" signals that the import should be kept as it is and not be passed to other resolvers thus making it external. Similar to the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolveid",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveId")]),s("OutboundLink")],1),t._v(" hook, you can also return an object to resolve the import to a different id while marking it as external at the same time.")]),t._v(" "),s("p",[t._v("In case a dynamic import is passed a string as argument, a string returned from this hook will be interpreted as an existing module id while returning "),s("code",[t._v("null")]),t._v(" will defer to other resolvers and eventually to "),s("code",[t._v("resolveId")]),t._v(" .")]),t._v(" "),s("p",[t._v("In case a dynamic import is not passed a string as argument, this hook gets access to the raw AST nodes to analyze and behaves slightly different in the following ways:")]),t._v(" "),s("ul",[s("li",[t._v("If all plugins return "),s("code",[t._v("null")]),t._v(", the import is treated as "),s("code",[t._v("external")]),t._v(" without a warning.")]),t._v(" "),s("li",[t._v("If a string is returned, this string is "),s("em",[t._v("not")]),t._v(" interpreted as a module id but is instead used as a replacement for the import argument. It is the responsibility of the plugin to make sure the generated code is valid.")]),t._v(" "),s("li",[t._v("To resolve such an import to an existing module, you can still return an object "),s("code",[t._v("{id, external}")]),t._v(".")])]),t._v(" "),s("p",[t._v("Note that the return value of this hook will not be passed to "),s("code",[t._v("resolveId")]),t._v(" afterwards; if you need access to the static resolution algorithm, you can use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisresolvesource-string-importer-string-options-skipself-boolean-custom-plugin-string-any--promiseid-string-external-boolean-modulesideeffects-boolean--no-treeshake-syntheticnamedexports-boolean--string-meta-plugin-string-any--null",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.resolve(source, importer)")]),s("OutboundLink")],1),t._v(" on the plugin context.")]),t._v(" "),s("h3",{attrs:{id:"resolveid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resolveid"}},[t._v("#")]),t._v(" "),s("code",[t._v("resolveId")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v('(source: string, importer: string | undefined, options: {custom?: {[plugin: string]: any}) => string | false | null | {id: string, external?: boolean, moduleSideEffects?: boolean | "no-treeshake" | null, syntheticNamedExports?: boolean | string | null, meta?: {[plugin: string]: any} | null}')]),t._v("\nKind: "),s("code",[t._v("async, first")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#buildstart",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("buildStart")]),s("OutboundLink")],1),t._v(" if we are resolving an entry point, "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#moduleparsed",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("moduleParsed")]),s("OutboundLink")],1),t._v(" if we are resolving an import, or as fallback for "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolvedynamicimport",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveDynamicImport")]),s("OutboundLink")],1),t._v(". Additionally this hook can be triggered during the build phase from plugin hooks by calling "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisemitfileemittedfile-emittedchunk--emittedasset--string",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.emitFile")]),s("OutboundLink")],1),t._v(" to emit an entry point or at any time by calling "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisresolvesource-string-importer-string-options-skipself-boolean-custom-plugin-string-any--promiseid-string-external-boolean-modulesideeffects-boolean--no-treeshake-syntheticnamedexports-boolean--string-meta-plugin-string-any--null",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.resolve")]),s("OutboundLink")],1),t._v(" to manually resolve an id.\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#load",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("load")]),s("OutboundLink")],1),t._v(" if the resolved id that has not yet been loaded, otherwise "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#buildend",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("buildEnd")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Defines a custom resolver. A resolver can be useful for e.g. locating third-party dependencies. Here "),s("code",[t._v("source")]),t._v(" is the importee exactly as it is written in the import statement, i.e. for")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" foo "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../bar.js'")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("the source will be "),s("code",[t._v('"../bar.js""')]),t._v(".")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("importer")]),t._v(" is the fully resolved id of the importing module. When resolving entry points, importer will be "),s("code",[t._v("undefined")]),t._v(". You can use this for instance as a mechanism to define custom proxy modules for entry points.")]),t._v(" "),s("p",[t._v("The following plugin will only expose the default export from entry points while still keeping named exports available for internal usage:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("importer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("importer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// We need to skip this plugin to avoid an infinite loop")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" resolution "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" skipSelf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If it cannot be resolved, return `null` so that Rollup displays an error")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("resolution"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("resolution"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("?entry-proxy")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("endsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'?entry-proxy'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" importee "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'?entry-proxy'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Note that this will throw if there is no default export")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("export {default} from '")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("importee"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("';")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[t._v("Returning "),s("code",[t._v("null")]),t._v(" defers to other "),s("code",[t._v("resolveId")]),t._v(" functions and eventually the default resolution behavior. Returning "),s("code",[t._v("false")]),t._v(" signals that "),s("code",[t._v("source")]),t._v(" should be treated as an external module and not included in the bundle. If this happens for a relative import, the id will be renormalized the same way as when the "),s("code",[t._v("external")]),t._v(" option is used.")]),t._v(" "),s("p",[t._v('If you return an object, then it is possible to resolve an import to a different id while excluding it from the bundle at the same time. This allows you to replace dependencies with external dependencies without the need for the user to mark them as "external" manually via the '),s("code",[t._v("external")]),t._v(" option:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-dependency'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-dependency-develop'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" external"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("Relative ids, i.e. starting with "),s("code",[t._v("./")]),t._v(" or "),s("code",[t._v("../")]),t._v(", will "),s("strong",[t._v("not")]),t._v(" be renormalized when returning an object. If you want this behaviour, return an absolute file system location as "),s("code",[t._v("id")]),t._v(" instead.")]),t._v(" "),s("p",[t._v("If "),s("code",[t._v("false")]),t._v(" is returned for "),s("code",[t._v("moduleSideEffects")]),t._v(" in the first hook that resolves a module id and no other module imports anything from this module, then this module will not be included even if the module would have side-effects. If "),s("code",[t._v("true")]),t._v(" is returned, Rollup will use its default algorithm to include all statements in the module that have side-effects (such as modifying a global or exported variable). If "),s("code",[t._v('"no-treeshake"')]),t._v(" is returned, treeshaking will be turned off for this module and it will also be included in one of the generated chunks even if it is empty. If "),s("code",[t._v("null")]),t._v(" is returned or the flag is omitted, then "),s("code",[t._v("moduleSideEffects")]),t._v(" will be determined by the "),s("code",[t._v("treeshake.moduleSideEffects")]),t._v(" option or default to "),s("code",[t._v("true")]),t._v(". The "),s("code",[t._v("load")]),t._v(" and "),s("code",[t._v("transform")]),t._v(" hooks can override this.")]),t._v(" "),s("p",[t._v("See "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#synthetic-named-exports",target:"_blank",rel:"noopener noreferrer"}},[t._v("synthetic named exports"),s("OutboundLink")],1),t._v(" for the effect of the "),s("code",[t._v("syntheticNamedExports")]),t._v(" option. If "),s("code",[t._v("null")]),t._v(" is returned or the flag is omitted, then "),s("code",[t._v("syntheticNamedExports")]),t._v(" will default to "),s("code",[t._v("false")]),t._v(". The "),s("code",[t._v("load")]),t._v(" and "),s("code",[t._v("transform")]),t._v(" hooks can override this.")]),t._v(" "),s("p",[t._v("See "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#custom-module-meta-data",target:"_blank",rel:"noopener noreferrer"}},[t._v("custom module meta-data"),s("OutboundLink")],1),t._v(" for how to use the "),s("code",[t._v("meta")]),t._v(" option. If "),s("code",[t._v("null")]),t._v(" is returned or the option is omitted, then "),s("code",[t._v("meta")]),t._v(" will default to an empty object. The "),s("code",[t._v("load")]),t._v(" and "),s("code",[t._v("transform")]),t._v(" hooks can add or replace properties of this object.")]),t._v(" "),s("p",[t._v("When triggering this hook from a plugin via "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisresolvesource-string-importer-string-options-skipself-boolean-custom-plugin-string-any--promiseid-string-external-boolean-modulesideeffects-boolean--no-treeshake-syntheticnamedexports-boolean--string-meta-plugin-string-any--null",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.resolve(source, importer, options)")]),s("OutboundLink")],1),t._v(", it is possible to pass a custom options object to this hook. While this object will be passed unmodified, plugins should follow the convention of adding a "),s("code",[t._v("custom")]),t._v(" property with an object where the keys correspond to the names of the plugins that the options are intended for. For details see "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#custom-resolver-options",target:"_blank",rel:"noopener noreferrer"}},[t._v("custom resolver options"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"transform"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transform"}},[t._v("#")]),t._v(" "),s("code",[t._v("transform")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v('(code: string, id: string) => string | null | {code?: string, map?: string | SourceMap, ast? : ESTree.Program, moduleSideEffects?: boolean | "no-treeshake" | null, syntheticNamedExports?: boolean | string | null, meta?: {[plugin: string]: any} | null}')]),t._v("\nKind: "),s("code",[t._v("async, sequential")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#load",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("load")]),s("OutboundLink")],1),t._v(" where the currently handled file was loaded.\nNextHook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#moduleparsed",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("moduleParsed")]),s("OutboundLink")],1),t._v(" once the file has been processed and parsed.")]),t._v(" "),s("p",[t._v("Can be used to transform individual modules. To prevent additional parsing overhead in case e.g. this hook already used "),s("code",[t._v("this.parse")]),t._v(" to generate an AST for some reason, this hook can optionally return a "),s("code",[t._v("{ code, ast, map }")]),t._v(" object. The "),s("code",[t._v("ast")]),t._v(" must be a standard ESTree AST with "),s("code",[t._v("start")]),t._v(" and "),s("code",[t._v("end")]),t._v(" properties for each node. If the transformation does not move code, you can preserve existing sourcemaps by setting "),s("code",[t._v("map")]),t._v(" to "),s("code",[t._v("null")]),t._v(". Otherwise you might need to generate the source map. See "),s("a",{attrs:{href:"https://rollupjs.org/#source-code-transformations",target:"_blank",rel:"noopener noreferrer"}},[t._v("the section on source code transformations"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Note that in watch mode, the result of this hook is cached when rebuilding and the hook is only triggered again for a module "),s("code",[t._v("id")]),t._v(" if either the "),s("code",[t._v("code")]),t._v(" of the module has changed or a file has changed that was added via "),s("code",[t._v("this.addWatchFile")]),t._v(" the last time the hook was triggered for this module.")]),t._v(" "),s("p",[t._v("You can also use the object form of the return value to configure additional properties of the module. Note that it's possible to return only properties and no code transformations.")]),t._v(" "),s("p",[t._v("If "),s("code",[t._v("false")]),t._v(" is returned for "),s("code",[t._v("moduleSideEffects")]),t._v(" and no other module imports anything from this module, then this module will not be included even if the module would have side-effects.")]),t._v(" "),s("p",[t._v("If "),s("code",[t._v("true")]),t._v(" is returned, Rollup will use its default algorithm to include all statements in the module that have side-effects (such as modifying a global or exported variable).")]),t._v(" "),s("p",[t._v("If "),s("code",[t._v('"no-treeshake"')]),t._v(" is returned, treeshaking will be turned off for this module and it will also be included in one of the generated chunks even if it is empty.")]),t._v(" "),s("p",[t._v("If "),s("code",[t._v("null")]),t._v(" is returned or the flag is omitted, then "),s("code",[t._v("moduleSideEffects")]),t._v(" will be determined by the "),s("code",[t._v("load")]),t._v(" hook that loaded this module, the first "),s("code",[t._v("resolveId")]),t._v(" hook that resolved this module, the "),s("code",[t._v("treeshake.moduleSideEffects")]),t._v(" option, or eventually default to "),s("code",[t._v("true")]),t._v(".")]),t._v(" "),s("p",[t._v("See "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#synthetic-named-exports",target:"_blank",rel:"noopener noreferrer"}},[t._v("synthetic named exports"),s("OutboundLink")],1),t._v(" for the effect of the "),s("code",[t._v("syntheticNamedExports")]),t._v(" option. If "),s("code",[t._v("null")]),t._v(" is returned or the flag is omitted, then "),s("code",[t._v("syntheticNamedExports")]),t._v(" will be determined by the "),s("code",[t._v("load")]),t._v(" hook that loaded this module, the first "),s("code",[t._v("resolveId")]),t._v(" hook that resolved this module, the "),s("code",[t._v("treeshake.moduleSideEffects")]),t._v(" option, or eventually default to "),s("code",[t._v("false")]),t._v(".")]),t._v(" "),s("p",[t._v("See "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#custom-module-meta-data",target:"_blank",rel:"noopener noreferrer"}},[t._v("custom module meta-data"),s("OutboundLink")],1),t._v(" for how to use the "),s("code",[t._v("meta")]),t._v(" option. If "),s("code",[t._v("null")]),t._v(" is returned or the option is omitted, then "),s("code",[t._v("meta")]),t._v(" will be determined by the "),s("code",[t._v("load")]),t._v(" hook that loaded this module, the first "),s("code",[t._v("resolveId")]),t._v(" hook that resolved this module or eventually default to an empty object.")]),t._v(" "),s("p",[t._v("You can use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisgetmoduleinfomoduleid-string--moduleinfo--null",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.getModuleInfo")]),s("OutboundLink")],1),t._v(" to find out the previous values of "),s("code",[t._v("moduleSideEffects")]),t._v(", "),s("code",[t._v("syntheticNamedExports")]),t._v(" and "),s("code",[t._v("meta")]),t._v(" inside this hook.")]),t._v(" "),s("h3",{attrs:{id:"watchchange"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#watchchange"}},[t._v("#")]),t._v(" "),s("code",[t._v("watchChange")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("watchChange: (id: string, change: {event: 'create' | 'update' | 'delete'}) => void")]),t._v("\nKind: "),s("code",[t._v("sync, sequential")]),t._v("\nPrevious/Next Hook: This hook can be triggered at any time both during the build and the output generation phases. If that is the case, the current build will still proceed but a new build will be scheduled to start once the current build has completed, starting again with "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#options",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("options")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Notifies a plugin whenever rollup has detected a change to a monitored file in "),s("code",[t._v("--watch")]),t._v(" mode. This hook cannot be used by output plugins. Second argument contains additional details of change event.")]),t._v(" "),s("h2",{attrs:{id:"output-generation-hooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#output-generation-hooks"}},[t._v("#")]),t._v(" Output Generation Hooks")]),t._v(" "),s("p",[t._v("Output generation hooks can provide information about a generated bundle and modify a build once complete. They work the same way and have the same types as "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#build-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("Build Hooks"),s("OutboundLink")],1),t._v(" but are called separately for each call to "),s("code",[t._v("bundle.generate(outputOptions)")]),t._v(" or "),s("code",[t._v("bundle.write(outputOptions)")]),t._v(". Plugins that only use output generation hooks can also be passed in via the output options and therefore run only for certain outputs.")]),t._v(" "),s("p",[t._v("The first hook of the output generation phase is "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputoptions",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("outputOptions")]),s("OutboundLink")],1),t._v(", the last one is either "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#generatebundle",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("generateBundle")]),s("OutboundLink")],1),t._v(" if the output was successfully generated via "),s("code",[t._v("bundle.generate(...)")]),t._v(", "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#writebundle",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("writeBundle")]),s("OutboundLink")],1),t._v(" if the output was successfully generated via "),s("code",[t._v("bundle.write(...)")]),t._v(", or "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#rendererror",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderError")]),s("OutboundLink")],1),t._v(" if an error occurred at any time during the output generation.")]),t._v(" "),s("p",[t._v("Additionally, "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#closebundle",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("closeBundle")]),s("OutboundLink")],1),t._v(" can be called as the very last hook, but it is the responsibility of the User to manually call "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#rolluprollup",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("bundle.close()")]),s("OutboundLink")],1),t._v(" to trigger this. The CLI will always make sure this is the case.")]),t._v(" "),s("h3",{attrs:{id:"augmentchunkhash"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#augmentchunkhash"}},[t._v("#")]),t._v(" "),s("code",[t._v("augmentChunkHash")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(chunkInfo: ChunkInfo) => string")]),t._v("\nKind: "),s("code",[t._v("sync, sequential")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderdynamicimport",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderDynamicImport")]),s("OutboundLink")],1),t._v(" for each dynamic import expression.\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolvefileurl",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveFileUrl")]),s("OutboundLink")],1),t._v(" for each use of "),s("code",[t._v("import.meta.ROLLUP_FILE_URL_referenceId")]),t._v(" and "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolveimportmeta",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveImportMeta")]),s("OutboundLink")],1),t._v(" for all other accesses to "),s("code",[t._v("import.meta")]),t._v(".")]),t._v(" "),s("p",[t._v("Can be used to augment the hash of individual chunks. Called for each Rollup output chunk. Returning a falsy value will not modify the hash. Truthy values will be passed to "),s("a",{attrs:{href:"https://nodejs.org/dist/latest-v12.x/docs/api/crypto.html#crypto_hash_update_data_inputencoding",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("hash.update")]),s("OutboundLink")],1),t._v(". The "),s("code",[t._v("chunkInfo")]),t._v(" is a reduced version of the one in "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#generatebundle",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("generateBundle")]),s("OutboundLink")],1),t._v(" without properties that rely on file names.")]),t._v(" "),s("p",[t._v("The following plugin will invalidate the hash of chunk "),s("code",[t._v("foo")]),t._v(" with the timestamp of the last build:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rollup.config.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("augmentChunkHash")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("chunkInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chunkInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Date"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h3",{attrs:{id:"banner"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#banner"}},[t._v("#")]),t._v(" "),s("code",[t._v("banner")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("string | (() => string)")]),t._v("\nKind: "),s("code",[t._v("async, parallel")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderstart",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderStart")]),s("OutboundLink")],1),t._v("\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderdynamicimport",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderDynamicImport")]),s("OutboundLink")],1),t._v(" for each dynamic import expression.")]),t._v(" "),s("p",[t._v("Cf. "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputbanneroutputfooter",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("output.banner/output.footer")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"closebundle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#closebundle"}},[t._v("#")]),t._v(" "),s("code",[t._v("closeBundle")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("closeBundle: () => Promise<void> | void")]),t._v("\nKind: "),s("code",[t._v("async, parallel")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#buildend",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("buildEnd")]),s("OutboundLink")],1),t._v(" if there was a build error, otherwise when "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#rolluprollup",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("bundle.close()")]),s("OutboundLink")],1),t._v(" is called, in which case this would be the last hook to be triggered.")]),t._v(" "),s("p",[t._v("Can be used to clean up any external service that may be running. Rollup's CLI will make sure this hook is called after each run, but it is the responsibility of users of the JavaScript API to manually call "),s("code",[t._v("bundle.close()")]),t._v(" once they are done generating bundles. For that reason, any plugin relying on this feature should carefully mention this in its documentation.")]),t._v(" "),s("p",[t._v("If a plugin wants to retain resources across builds in watch mode, they can check for "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thismeta-rollupversion-string-watchmode-boolean",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.meta.watchMode")]),s("OutboundLink")],1),t._v(" in this hook and perform the necessary cleanup for watch mode in "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#closewatcher",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("closeWatcher")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"footer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#footer"}},[t._v("#")]),t._v(" "),s("code",[t._v("footer")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("string | (() => string)")]),t._v("\nKind: "),s("code",[t._v("async, parallel")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderstart",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderStart")]),s("OutboundLink")],1),t._v("\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderdynamicimport",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderDynamicImport")]),s("OutboundLink")],1),t._v(" for each dynamic import expression.")]),t._v(" "),s("p",[t._v("Cf. "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputbanneroutputfooter",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("output.banner/output.footer")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"generatebundle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#generatebundle"}},[t._v("#")]),t._v(" "),s("code",[t._v("generateBundle")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(options: OutputOptions, bundle: { [fileName: string]: AssetInfo | ChunkInfo }, isWrite: boolean) => void")]),t._v("\nKind: "),s("code",[t._v("async, sequential")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderchunk",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderChunk")]),s("OutboundLink")],1),t._v(" for each chunk.\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#writebundle",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("writeBundle")]),s("OutboundLink")],1),t._v(" if the output was generated via "),s("code",[t._v("bundle.write(...)")]),t._v(", otherwise this is the last hook of the output generation phase and may again be followed by "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputoptions",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("outputOptions")]),s("OutboundLink")],1),t._v(" if another output is generated.")]),t._v(" "),s("p",[t._v("Called at the end of "),s("code",[t._v("bundle.generate()")]),t._v(" or immediately before the files are written in "),s("code",[t._v("bundle.write()")]),t._v(". To modify the files after they have been written, use the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#writebundle",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("writeBundle")]),s("OutboundLink")],1),t._v(" hook. "),s("code",[t._v("bundle")]),t._v(" provides the full list of files being written or generated along with their details:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// AssetInfo")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  fileName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  source"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Uint8Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'asset'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ChunkInfo")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  dynamicImports"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  exports"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  facadeModuleId"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  fileName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  implicitlyLoadedBefore"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  imports"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  importedBindings"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("imported"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  isDynamicEntry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  isEntry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  isImplicitEntry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  map"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SourceMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  modules"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      renderedExports"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      removedExports"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      renderedLength"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      originalLength"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  referencedFiles"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chunk'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br")])]),s("p",[t._v("You can prevent files from being emitted by deleting them from the bundle object in this hook. To emit additional files, use the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisemitfileemittedfile-emittedchunk--emittedasset--string",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.emitFile")]),s("OutboundLink")],1),t._v(" plugin context function.")]),t._v(" "),s("h3",{attrs:{id:"intro"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#intro"}},[t._v("#")]),t._v(" "),s("code",[t._v("intro")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("string | (() => string)")]),t._v("\nKind: "),s("code",[t._v("async, parallel")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderstart",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderStart")]),s("OutboundLink")],1),t._v("\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderdynamicimport",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderDynamicImport")]),s("OutboundLink")],1),t._v(" for each dynamic import expression.")]),t._v(" "),s("p",[t._v("Cf. "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputintrooutputoutro",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("output.intro/output.outro")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"outputoptions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#outputoptions"}},[t._v("#")]),t._v(" "),s("code",[t._v("outputOptions")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(outputOptions: OutputOptions) => OutputOptions | null")]),t._v("\nKind: "),s("code",[t._v("sync, sequential")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#buildend",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("buildEnd")]),s("OutboundLink")],1),t._v(" if this is the first time an output is generated, otherwise either "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#generatebundle",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("generateBundle")]),s("OutboundLink")],1),t._v(", "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#writebundle",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("writeBundle")]),s("OutboundLink")],1),t._v(" or "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#rendererror",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderError")]),s("OutboundLink")],1),t._v(" depending on the previously generated output. This is the first hook of the output generation phase.\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderstart",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderStart")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Replaces or manipulates the output options object passed to "),s("code",[t._v("bundle.generate()")]),t._v(" or "),s("code",[t._v("bundle.write()")]),t._v(". Returning "),s("code",[t._v("null")]),t._v(" does not replace anything. If you just need to read the output options, it is recommended to use the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderstart",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderStart")]),s("OutboundLink")],1),t._v(" hook as this hook has access to the output options after the transformations from all "),s("code",[t._v("outputOptions")]),t._v(" hooks have been taken into account.")]),t._v(" "),s("h3",{attrs:{id:"outro"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#outro"}},[t._v("#")]),t._v(" "),s("code",[t._v("outro")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("string | (() => string)")]),t._v("\nKind: "),s("code",[t._v("async, parallel")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderstart",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderStart")]),s("OutboundLink")],1),t._v("\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderdynamicimport",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderDynamicImport")]),s("OutboundLink")],1),t._v(" for each dynamic import expression.")]),t._v(" "),s("p",[t._v("Cf. "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputintrooutputoutro",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("output.intro/output.outro")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"renderchunk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#renderchunk"}},[t._v("#")]),t._v(" "),s("code",[t._v("renderChunk")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(code: string, chunk: ChunkInfo, options: OutputOptions) => string | { code: string, map: SourceMap } | null")]),t._v("\nKind: "),s("code",[t._v("async, sequential")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolvefileurl",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveFileUrl")]),s("OutboundLink")],1),t._v(" for each use of "),s("code",[t._v("import.meta.ROLLUP_FILE_URL_referenceId")]),t._v(" and "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolveimportmeta",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveImportMeta")]),s("OutboundLink")],1),t._v(" for all other accesses to "),s("code",[t._v("import.meta")]),t._v(".\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#generatebundle",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("generateBundle")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Can be used to transform individual chunks. Called for each Rollup output chunk file. Returning "),s("code",[t._v("null")]),t._v(" will apply no transformations.")]),t._v(" "),s("h3",{attrs:{id:"renderdynamicimport"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#renderdynamicimport"}},[t._v("#")]),t._v(" "),s("code",[t._v("renderDynamicImport")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("({format: string, moduleId: string, targetModuleId: string | null, customResolution: string | null}) => {left: string, right: string} | null")]),t._v("\nKind: "),s("code",[t._v("sync, first")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#banner",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("banner")]),s("OutboundLink")],1),t._v(", "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#footer",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("footer")]),s("OutboundLink")],1),t._v(", "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#intro",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("intro")]),s("OutboundLink")],1),t._v(", "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outro",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("outro")]),s("OutboundLink")],1),t._v(".\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#augmentchunkhash",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("augmentChunkHash")]),s("OutboundLink")],1),t._v(" for each chunk that would contain a hash in the file name.")]),t._v(" "),s("p",[t._v("This hook provides fine-grained control over how dynamic imports are rendered by providing replacements for the code to the left ("),s("code",[t._v("import(")]),t._v(") and right ("),s("code",[t._v(")")]),t._v(") of the argument of the import expression. Returning "),s("code",[t._v("null")]),t._v(" defers to other hooks of this type and ultimately renders a format-specific default.")]),t._v(" "),s("p",[s("code",[t._v("format")]),t._v(" is the rendered output format, "),s("code",[t._v("moduleId")]),t._v(" the id of the module performing the dynamic import. If the import could be resolved to an internal or external id, then "),s("code",[t._v("targetModuleId")]),t._v(" will be set to this id, otherwise it will be "),s("code",[t._v("null")]),t._v(". If the dynamic import contained a non-string expression that was resolved by a "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolvedynamicimport",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveDynamicImport")]),s("OutboundLink")],1),t._v(" hook to a replacement string, then "),s("code",[t._v("customResolution")]),t._v(" will contain that string.")]),t._v(" "),s("p",[t._v("The following code will replace all dynamic imports with a custom handler, adding "),s("code",[t._v("import.meta.url")]),t._v(" as a second argument to allow the handler to resolve relative imports correctly:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugin")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dynamic-import-polyfill'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderDynamicImport")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      left"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dynamicImportPolyfill('")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      right"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("', import.meta.url)'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// input")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lib.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// output")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dynamicImportPolyfill")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lib.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("p",[t._v("The next plugin will make sure all dynamic imports of "),s("code",[t._v("esm-lib")]),t._v(" are marked as external and retained as import expressions to e.g. allow a CommonJS build to import an ES module in Node 13+, cf. how to "),s("a",{attrs:{href:"https://nodejs.org/api/esm.html#esm_import_expressions",target:"_blank",rel:"noopener noreferrer"}},[t._v("import ES modules from CommonJS"),s("OutboundLink")],1),t._v(" in the Node documentation.")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugin")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'retain-import-expression'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveDynamicImport")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("specifier")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("specifier "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'esm-lib'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderDynamicImport")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" targetModuleId "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("targetModuleId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'esm-lib'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        left"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'import('")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        right"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("')'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("p",[t._v("Note that when this hook rewrites dynamic imports in non-ES formats, no interop code to make sure that e.g. the default export is available as "),s("code",[t._v(".default")]),t._v(" is generated. It is the responsibility of the plugin to make sure the rewritten dynamic import returns a Promise that resolves to a proper namespace object.")]),t._v(" "),s("h3",{attrs:{id:"rendererror"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rendererror"}},[t._v("#")]),t._v(" "),s("code",[t._v("renderError")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(error: Error) => void")]),t._v("\nKind: "),s("code",[t._v("async, parallel")]),t._v("\nPrevious Hook: Any hook from "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderstart",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderStart")]),s("OutboundLink")],1),t._v(" to "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderchunk",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderChunk")]),s("OutboundLink")],1),t._v(".\nNext Hook: If it is called, this is the last hook of the output generation phase and may again be followed by "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputoptions",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("outputOptions")]),s("OutboundLink")],1),t._v(" if another output is generated.")]),t._v(" "),s("p",[t._v("Called when rollup encounters an error during "),s("code",[t._v("bundle.generate()")]),t._v(" or "),s("code",[t._v("bundle.write()")]),t._v(". The error is passed to this hook. To get notified when generation completes successfully, use the "),s("code",[t._v("generateBundle")]),t._v(" hook.")]),t._v(" "),s("h3",{attrs:{id:"renderstart"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#renderstart"}},[t._v("#")]),t._v(" "),s("code",[t._v("renderStart")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(outputOptions: OutputOptions, inputOptions: InputOptions) => void")]),t._v("\nKind: "),s("code",[t._v("async, parallel")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputoptions",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("outputOptions")]),s("OutboundLink")],1),t._v("\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#banner",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("banner")]),s("OutboundLink")],1),t._v(", "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#footer",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("footer")]),s("OutboundLink")],1),t._v(", "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#intro",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("intro")]),s("OutboundLink")],1),t._v(" and "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outro",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("outro")]),s("OutboundLink")],1),t._v(" run in parallel.")]),t._v(" "),s("p",[t._v("Called initially each time "),s("code",[t._v("bundle.generate()")]),t._v(" or "),s("code",[t._v("bundle.write()")]),t._v(" is called. To get notified when generation has completed, use the "),s("code",[t._v("generateBundle")]),t._v(" and "),s("code",[t._v("renderError")]),t._v(" hooks. This is the recommended hook to use when you need access to the output options passed to "),s("code",[t._v("bundle.generate()")]),t._v(" or "),s("code",[t._v("bundle.write()")]),t._v(" as it takes the transformations by all "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputoptions",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("outputOptions")]),s("OutboundLink")],1),t._v(" hooks into account and also contains the right default values for unset options. It also receives the input options passed to "),s("code",[t._v("rollup.rollup()")]),t._v(" so that plugins that can be used as output plugins, i.e. plugins that only use "),s("code",[t._v("generate")]),t._v(" phase hooks, can get access to them.")]),t._v(" "),s("h3",{attrs:{id:"resolvefileurl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resolvefileurl"}},[t._v("#")]),t._v(" "),s("code",[t._v("resolveFileUrl")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("({chunkId: string, fileName: string, format: string, moduleId: string, referenceId: string, relativePath: string}) => string | null")]),t._v("\nKind: "),s("code",[t._v("sync, first")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#augmentchunkhash",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("augmentChunkHash")]),s("OutboundLink")],1),t._v(" for each chunk that would contain a hash in the file name.\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderchunk",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderChunk")]),s("OutboundLink")],1),t._v(" for each chunk.")]),t._v(" "),s("p",[t._v("Allows to customize how Rollup resolves URLs of files that were emitted by plugins via "),s("code",[t._v("this.emitFile")]),t._v(". By default, Rollup will generate code for "),s("code",[t._v("import.meta.ROLLUP_FILE_URL_referenceId")]),t._v(" that should correctly generate absolute URLs of emitted files independent of the output format and the host system where the code is deployed.")]),t._v(" "),s("p",[t._v("For that, all formats except CommonJS and UMD assume that they run in a browser environment where "),s("code",[t._v("URL")]),t._v(" and "),s("code",[t._v("document")]),t._v(" are available. In case that fails or to generate more optimized code, this hook can be used to customize this behaviour. To do that, the following information is available:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("chunkId")]),t._v(": The id of the chunk this file is referenced from.")]),t._v(" "),s("li",[s("code",[t._v("fileName")]),t._v(": The path and file name of the emitted asset, relative to "),s("code",[t._v("output.dir")]),t._v(" without a leading "),s("code",[t._v("./")]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("format")]),t._v(": The rendered output format.")]),t._v(" "),s("li",[s("code",[t._v("moduleId")]),t._v(": The id of the original module this file is referenced from. Useful for conditionally resolving certain assets differently.")]),t._v(" "),s("li",[s("code",[t._v("referenceId")]),t._v(": The reference id of the file.")]),t._v(" "),s("li",[s("code",[t._v("relativePath")]),t._v(": The path and file name of the emitted file, relative to the chunk the file is referenced from. This will path will contain no leading "),s("code",[t._v("./")]),t._v(" but may contain a leading "),s("code",[t._v("../")]),t._v(".")])]),t._v(" "),s("p",[t._v("Note that since this hook has access to the filename of the current chunk, its return value will not be considered when generating the hash of this chunk.")]),t._v(" "),s("p",[t._v("The following plugin will always resolve all files relative to the current document:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rollup.config.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveFileUrl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("fileName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("new URL('")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("fileName"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("', document.baseURI).href")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h3",{attrs:{id:"resolveimportmeta"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resolveimportmeta"}},[t._v("#")]),t._v(" "),s("code",[t._v("resolveImportMeta")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(property: string | null, {chunkId: string, moduleId: string, format: string}) => string | null")]),t._v("\nKind: "),s("code",[t._v("sync, first")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#augmentchunkhash",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("augmentChunkHash")]),s("OutboundLink")],1),t._v(" for each chunk that would contain a hash in the file name.\nNext Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#renderchunk",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("renderChunk")]),s("OutboundLink")],1),t._v(" for each chunk.")]),t._v(" "),s("p",[t._v("Allows to customize how Rollup handles "),s("code",[t._v("import.meta")]),t._v(" and "),s("code",[t._v("import.meta.someProperty")]),t._v(", in particular "),s("code",[t._v("import.meta.url")]),t._v(". In ES modules, "),s("code",[t._v("import.meta")]),t._v(" is an object and "),s("code",[t._v("import.meta.url")]),t._v(" contains the URL of the current module, e.g. "),s("code",[t._v("http://server.net/bundle.js")]),t._v(" for browsers or "),s("code",[t._v("file:///path/to/bundle.js")]),t._v(" in Node.")]),t._v(" "),s("p",[t._v("By default for formats other than ES modules, Rollup replaces "),s("code",[t._v("import.meta.url")]),t._v(" with code that attempts to match this behaviour by returning the dynamic URL of the current chunk. Note that all formats except CommonJS and UMD assume that they run in a browser environment where "),s("code",[t._v("URL")]),t._v(" and "),s("code",[t._v("document")]),t._v(" are available. For other properties, "),s("code",[t._v("import.meta.someProperty")]),t._v(" is replaced with "),s("code",[t._v("undefined")]),t._v(" while "),s("code",[t._v("import.meta")]),t._v(" is replaced with an object containing a "),s("code",[t._v("url")]),t._v(" property.")]),t._v(" "),s("p",[t._v("This behaviour can be changed—also for ES modules—via this hook. For each occurrence of "),s("code",[t._v("import.meta<.someProperty>")]),t._v(", this hook is called with the name of the property or "),s("code",[t._v("null")]),t._v(" if "),s("code",[t._v("import.meta")]),t._v(" is accessed directly. For example, the following code will resolve "),s("code",[t._v("import.meta.url")]),t._v(" using the relative path of the original module to the current working directory and again resolve this path against the base URL of the current document at runtime:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rollup.config.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveImportMeta")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("property"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("moduleId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("property "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("new URL('")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("relative")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cwd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" moduleId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("', document.baseURI).href")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("Note that since this hook has access to the filename of the current chunk, its return value will not be considered when generating the hash of this chunk.")]),t._v(" "),s("h3",{attrs:{id:"writebundle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#writebundle"}},[t._v("#")]),t._v(" "),s("code",[t._v("writeBundle")])]),t._v(" "),s("p",[t._v("Type: "),s("code",[t._v("(options: OutputOptions, bundle: { [fileName: string]: AssetInfo | ChunkInfo }) => void")]),t._v("\nKind: "),s("code",[t._v("async, parallel")]),t._v("\nPrevious Hook: "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#generatebundle",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("generateBundle")]),s("OutboundLink")],1),t._v("\nNext Hook: If it is called, this is the last hook of the output generation phase and may again be followed by "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputoptions",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("outputOptions")]),s("OutboundLink")],1),t._v(" if another output is generated.")]),t._v(" "),s("p",[t._v("Called only at the end of "),s("code",[t._v("bundle.write()")]),t._v(" once all files have been written. Similar to the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#generatebundle",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("generateBundle")]),s("OutboundLink")],1),t._v(" hook, "),s("code",[t._v("bundle")]),t._v(" provides the full list of files being written along with their details.")]),t._v(" "),s("h2",{attrs:{id:"deprecated-hooks"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deprecated-hooks"}},[t._v("#")]),t._v(" Deprecated Hooks")]),t._v(" "),s("p",[t._v("☢️ These hooks have been deprecated and may be removed in a future Rollup version.")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("resolveAssetUrl")]),t._v(" - "),s("strong",[s("em",[t._v("Use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolvefileurl",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveFileUrl")]),s("OutboundLink")],1)])]),t._v(" - Function hook that allows to customize the generated code for asset URLs.")])]),t._v(" "),s("p",[t._v("More properties may be supported in the future, as and when they prove necessary.")]),t._v(" "),s("h2",{attrs:{id:"plugin-context"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugin-context"}},[t._v("#")]),t._v(" Plugin Context")]),t._v(" "),s("p",[t._v("A number of utility functions and informational bits can be accessed from within most "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#build-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("hooks"),s("OutboundLink")],1),t._v(" via "),s("code",[t._v("this")]),t._v(":")]),t._v(" "),s("h3",{attrs:{id:"this-addwatchfile-id-string-void"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-addwatchfile-id-string-void"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.addWatchFile(id: string) => void")])]),t._v(" "),s("p",[t._v("Adds additional files to be monitored in watch mode so that changes to these files will trigger rebuilds. "),s("code",[t._v("id")]),t._v(" can be an absolute path to a file or directory or a path relative to the current working directory. This context function can only be used in hooks during the build phase, i.e. in "),s("code",[t._v("buildStart")]),t._v(", "),s("code",[t._v("load")]),t._v(", "),s("code",[t._v("resolveId")]),t._v(", and "),s("code",[t._v("transform")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("Note:")]),t._v(" Usually in watch mode to improve rebuild speed, the "),s("code",[t._v("transform")]),t._v(" hook will only be triggered for a given module if its contents actually changed. Using "),s("code",[t._v("this.addWatchFile")]),t._v(" from within the "),s("code",[t._v("transform")]),t._v(" hook will make sure the "),s("code",[t._v("transform")]),t._v(" hook is also reevaluated for this module if the watched file changes.")]),t._v(" "),s("p",[t._v("In general, it is recommended to use "),s("code",[t._v("this.addWatchFile")]),t._v(" from within the hook that depends on the watched file.")]),t._v(" "),s("h3",{attrs:{id:"this-emitfile-emittedfile-emittedchunk-emittedasset-string"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-emitfile-emittedfile-emittedchunk-emittedasset-string"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.emitFile(emittedFile: EmittedChunk | EmittedAsset) => string")])]),t._v(" "),s("p",[t._v("Emits a new file that is included in the build output and returns a "),s("code",[t._v("referenceId")]),t._v(" that can be used in various places to reference the emitted file. "),s("code",[t._v("emittedFile")]),t._v(" can have one of two forms:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// EmittedChunk")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chunk'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  fileName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  implicitlyLoadedAfterOneOf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  importer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  preserveSignature"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'strict'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'allow-extension'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'exports-only'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// EmittedAsset")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'asset'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  fileName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  source"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Uint8Array\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[t._v("In both cases, either a "),s("code",[t._v("name")]),t._v(" or a "),s("code",[t._v("fileName")]),t._v(" can be supplied. If a "),s("code",[t._v("fileName")]),t._v(" is provided, it will be used unmodified as the name of the generated file, throwing an error if this causes a conflict. Otherwise if a "),s("code",[t._v("name")]),t._v(" is supplied, this will be used as substitution for "),s("code",[t._v("[name]")]),t._v(" in the corresponding "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputchunkfilenames",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("output.chunkFileNames")]),s("OutboundLink")],1),t._v(" or "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputassetfilenames",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("output.assetFileNames")]),s("OutboundLink")],1),t._v(" pattern, possibly adding a unique number to the end of the file name to avoid conflicts. If neither a "),s("code",[t._v("name")]),t._v(" nor "),s("code",[t._v("fileName")]),t._v(" is supplied, a default name will be used.")]),t._v(" "),s("p",[t._v("You can reference the URL of an emitted file in any code returned by a "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#load",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("load")]),s("OutboundLink")],1),t._v(" or "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#transform",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("transform")]),s("OutboundLink")],1),t._v(" plugin hook via "),s("code",[t._v("import.meta.ROLLUP_FILE_URL_referenceId")]),t._v(". See "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#file-urls",target:"_blank",rel:"noopener noreferrer"}},[t._v("File URLs"),s("OutboundLink")],1),t._v(" for more details and an example.")]),t._v(" "),s("p",[t._v("The generated code that replaces "),s("code",[t._v("import.meta.ROLLUP_FILE_URL_referenceId")]),t._v(" can be customized via the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolvefileurl",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveFileUrl")]),s("OutboundLink")],1),t._v(" plugin hook. You can also use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisgetfilenamereferenceid-string--string",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.getFileName(referenceId)")]),s("OutboundLink")],1),t._v(" to determine the file name as soon as it is available")]),t._v(" "),s("p",[t._v("If the "),s("code",[t._v("type")]),t._v(" is "),s("em",[s("code",[t._v("chunk")])]),t._v(", then this emits a new chunk with the given module "),s("code",[t._v("id")]),t._v(" as entry point. To resolve it, the "),s("code",[t._v("id")]),t._v(" will be passed through build hooks just like regular entry points, starting with "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolveid",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveId")]),s("OutboundLink")],1),t._v(". If an "),s("code",[t._v("importer")]),t._v(" is provided, this acts as the second parameter of "),s("code",[t._v("resolveId")]),t._v(" and is important to properly resolve relative paths. If it is not provided, paths will be resolved relative to the current working directory. If a value for "),s("code",[t._v("preserveSignature")]),t._v(" is provided, this will override "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#preserveentrysignatures",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("preserveEntrySignatures")]),s("OutboundLink")],1),t._v(" for this particular chunk.")]),t._v(" "),s("p",[t._v("This will not result in duplicate modules in the graph, instead if necessary, existing chunks will be split or a facade chunk with reexports will be created. Chunks with a specified "),s("code",[t._v("fileName")]),t._v(" will always generate separate chunks while other emitted chunks may be deduplicated with existing chunks even if the "),s("code",[t._v("name")]),t._v(" does not match. If such a chunk is not deduplicated, the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputchunkfilenames",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("output.chunkFileNames")]),s("OutboundLink")],1),t._v(" name pattern will be used.")]),t._v(" "),s("p",[t._v("By default, Rollup assumes that emitted chunks are executed independent of other entry points, possibly even before any other code is executed. This means that if an emitted chunk shares a dependency with an existing entry point, Rollup will create an additional chunk for dependencies that are shared between those entry points. Providing a non-empty array of module ids for "),s("code",[t._v("implicitlyLoadedAfterOneOf")]),t._v(" will change that behaviour by giving Rollup additional information to prevent this in some cases. Those ids will be resolved the same way as the "),s("code",[t._v("id")]),t._v(" property, respecting the "),s("code",[t._v("importer")]),t._v(" property if it is provided. Rollup will now assume that the emitted chunk is only executed if at least one of the entry points that lead to one of the ids in "),s("code",[t._v("implicitlyLoadedAfterOneOf")]),t._v(" being loaded has already been executed, creating the same chunks as if the newly emitted chunk was only reachable via dynamic import from the modules in "),s("code",[t._v("implicitlyLoadedAfterOneOf")]),t._v(". Here is an example that uses this to create a simple HTML file with several scripts, creating optimized chunks to respect their execution order:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rollup.config.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateHtml")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" ref1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ref3\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildStart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      ref1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emitFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chunk'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/entry1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      ref2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emitFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chunk'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/entry2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        implicitlyLoadedAfterOneOf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/entry1'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      ref3 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emitFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chunk'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/entry3'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        implicitlyLoadedAfterOneOf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src/entry2'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateBundle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emitFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'asset'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        fileName"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.html'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        source"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="UTF-8">\n        <title>Title</title>\n       </head>\n      <body>\n        <script src="')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFileName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ref1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" type="module"><\/script>\n        <script src="')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFileName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ref2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" type="module"><\/script>\n        <script src="')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFileName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ref3"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" type="module"><\/script>\n      </body>\n      </html>\n      ')]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  input"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  preserveEntrySignatures"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  plugins"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateHtml")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    format"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'es'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br")])]),s("p",[t._v("If there are no dynamic imports, this will create exactly three chunks where the first chunk contains all dependencies of "),s("code",[t._v("src/entry1")]),t._v(", the second chunk contains only the dependencies of "),s("code",[t._v("src/entry2")]),t._v(" that are not contained in the first chunk, importing those from the first chunk, and again the same for the third chunk.")]),t._v(" "),s("p",[t._v("Note that even though any module id can be used in "),s("code",[t._v("implicitlyLoadedAfterOneOf")]),t._v(", Rollup will throw an error if such an id cannot be uniquely associated with a chunk, e.g. because the "),s("code",[t._v("id")]),t._v(" cannot be reached implicitly or explicitly from the existing static entry points, or because the file is completely tree-shaken. Using only entry points, either defined by the user or of previously emitted chunks, will always work, though.")]),t._v(" "),s("p",[t._v("If the "),s("code",[t._v("type")]),t._v(" is "),s("em",[s("code",[t._v("asset")])]),t._v(", then this emits an arbitrary new file with the given "),s("code",[t._v("source")]),t._v(" as content. It is possible to defer setting the "),s("code",[t._v("source")]),t._v(" via "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thissetassetsourcereferenceid-string-source-string--uint8array--void",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.setAssetSource(referenceId, source)")]),s("OutboundLink")],1),t._v(" to a later time to be able to reference a file during the build phase while setting the source separately for each output during the generate phase. Assets with a specified "),s("code",[t._v("fileName")]),t._v(" will always generate separate files while other emitted assets may be deduplicated with existing assets if they have the same source even if the "),s("code",[t._v("name")]),t._v(" does not match. If such an asset is not deduplicated, the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputassetfilenames",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("output.assetFileNames")]),s("OutboundLink")],1),t._v(" name pattern will be used.")]),t._v(" "),s("h3",{attrs:{id:"this-error-error-string-error-position-number-column-number-line-number-never"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-error-error-string-error-position-number-column-number-line-number-never"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.error(error: string | Error, position?: number | { column: number; line: number }) => never")])]),t._v(" "),s("p",[t._v("Structurally equivalent to "),s("code",[t._v("this.warn")]),t._v(", except that it will also abort the bundling process.")]),t._v(" "),s("h3",{attrs:{id:"this-getcombinedsourcemap-sourcemap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-getcombinedsourcemap-sourcemap"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.getCombinedSourcemap() => SourceMap")])]),t._v(" "),s("p",[t._v("Get the combined source maps of all previous plugins. This context function can only be used in the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#transform",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("transform")]),s("OutboundLink")],1),t._v(" plugin hook.")]),t._v(" "),s("h3",{attrs:{id:"this-getfilename-referenceid-string-string"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-getfilename-referenceid-string-string"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.getFileName(referenceId: string) => string")])]),t._v(" "),s("p",[t._v("Get the file name of a chunk or asset that has been emitted via "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisemitfileemittedfile-emittedchunk--emittedasset--string",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.emitFile")]),s("OutboundLink")],1),t._v(". The file name will be relative to "),s("code",[t._v("outputOptions.dir")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"this-getmoduleids-iterableiterator-string"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-getmoduleids-iterableiterator-string"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.getModuleIds() => IterableIterator<string>")])]),t._v(" "),s("p",[t._v("Returns an "),s("code",[t._v("Iterator")]),t._v(" that gives access to all module ids in the current graph. It can be iterated via")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" moduleId "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getModuleIds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("or converted into an Array via "),s("code",[t._v("Array.from(this.getModuleIds())")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"this-getmoduleinfo-moduleid-string-moduleinfo-null"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-getmoduleinfo-moduleid-string-moduleinfo-null"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.getModuleInfo(moduleId: string) => (ModuleInfo | null)")])]),t._v(" "),s("p",[t._v("Returns additional information about the module in question in the form")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the id of the module, for convenience")]),t._v("\n  code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the source code of the module, `null` if external or not yet available")]),t._v("\n  ast"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ESTree"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Program"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the parsed abstract syntax tree if available")]),t._v("\n  isEntry"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// is this a user- or plugin-defined entry point")]),t._v("\n  isExternal"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// for external modules that are referenced but not included in the graph")]),t._v("\n  importedIds"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the module ids statically imported by this module")]),t._v("\n  importers"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the ids of all modules that statically import this module")]),t._v("\n  dynamicallyImportedIds"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the module ids imported by this module via dynamic import()")]),t._v("\n  dynamicImporters"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the ids of all modules that import this module via dynamic import()")]),t._v("\n  implicitlyLoadedAfterOneOf"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// implicit relationships, declared via this.emitChunk")]),t._v("\n  implicitlyLoadedBefore"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// implicit relationships, declared via this.emitChunk")]),t._v("\n  hasModuleSideEffects"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"no-treeshake"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// are imports of this module included if nothing is imported from it")]),t._v("\n  meta"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plugin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" any"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// custom module meta-data")]),t._v("\n  syntheticNamedExports"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" string "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// final value of synthetic named exports")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])]),s("p",[t._v("During the build, this object represents currently available information about the module. Before the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#buildend",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("buildEnd")]),s("OutboundLink")],1),t._v(" hook, this information may be incomplete as e.g. the "),s("code",[t._v("importedIds")]),t._v(" are not yet resolved or additional "),s("code",[t._v("importers")]),t._v(" are discovered.")]),t._v(" "),s("p",[t._v("Returns "),s("code",[t._v("null")]),t._v(" if the module id cannot be found.")]),t._v(" "),s("h3",{attrs:{id:"this-getwatchfiles-string"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-getwatchfiles-string"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.getWatchFiles() => string[]")])]),t._v(" "),s("p",[t._v("Get ids of the files which has been watched previously. Include both files added by plugins with "),s("code",[t._v("this.addWatchFile")]),t._v(" and files added implicitly by rollup during the build.")]),t._v(" "),s("h3",{attrs:{id:"this-meta-rollupversion-string-watchmode-boolean"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-meta-rollupversion-string-watchmode-boolean"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.meta: {rollupVersion: string, watchMode: boolean}")])]),t._v(" "),s("p",[t._v("An object containing potentially useful Rollup metadata:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("rollupVersion")]),t._v(": The currently running version of Rollup as define in "),s("code",[t._v("package.json")]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("watchMode")]),t._v(": "),s("code",[t._v("true")]),t._v(" if Rollup was started via "),s("code",[t._v("rollup.watch(...)")]),t._v(" or from the command line with "),s("code",[t._v("--watch")]),t._v(", "),s("code",[t._v("false")]),t._v(" otherwise.")])]),t._v(" "),s("p",[s("code",[t._v("meta")]),t._v(" is the only context property accessible from the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#options",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("options")]),s("OutboundLink")],1),t._v(" hook.")]),t._v(" "),s("h3",{attrs:{id:"this-parse-code-string-acornoptions-acornoptions-estree-program"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-parse-code-string-acornoptions-acornoptions-estree-program"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.parse(code: string, acornOptions?: AcornOptions) => ESTree.Program")])]),t._v(" "),s("p",[t._v("Use Rollup's internal acorn instance to parse code to an AST.")]),t._v(" "),s("h3",{attrs:{id:"this-resolve-source-string-importer-string-options-skipself-boolean-custom-plugin-string-any-promise-id-string-external-boolean-modulesideeffects-boolean-no-treeshake-syntheticnamedexports-boolean-string-meta-plugin-string-any-null"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-resolve-source-string-importer-string-options-skipself-boolean-custom-plugin-string-any-promise-id-string-external-boolean-modulesideeffects-boolean-no-treeshake-syntheticnamedexports-boolean-string-meta-plugin-string-any-null"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.resolve(source: string, importer?: string, options?: {skipSelf?: boolean, custom?: {[plugin: string]: any}}) => Promise<{id: string, external: boolean, moduleSideEffects: boolean | 'no-treeshake', syntheticNamedExports: boolean | string, meta: {[plugin: string]: any}} | null>")])]),t._v(" "),s("p",[t._v("Resolve imports to module ids (i.e. file names) using the same plugins that Rollup uses, and determine if an import should be external. If "),s("code",[t._v("null")]),t._v(" is returned, the import could not be resolved by Rollup or any plugin but was not explicitly marked as external by the user.")]),t._v(" "),s("p",[t._v("If you pass "),s("code",[t._v("skipSelf: true")]),t._v(", then the "),s("code",[t._v("resolveId")]),t._v(" hook of the plugin from which "),s("code",[t._v("this.resolve")]),t._v(" is called will be skipped when resolving.")]),t._v(" "),s("p",[t._v("You can also pass an object of plugin-specific options via the "),s("code",[t._v("custom")]),t._v(" option, see "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#custom-resolver-options",target:"_blank",rel:"noopener noreferrer"}},[t._v("custom resolver options"),s("OutboundLink")],1),t._v(" for details.")]),t._v(" "),s("h3",{attrs:{id:"this-setassetsource-referenceid-string-source-string-uint8array-void"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-setassetsource-referenceid-string-source-string-uint8array-void"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.setAssetSource(referenceId: string, source: string | Uint8Array) => void")])]),t._v(" "),s("p",[t._v("Set the deferred source of an asset. Note that you can also pass a Node "),s("code",[t._v("Buffer")]),t._v(" as "),s("code",[t._v("source")]),t._v(" as it is a sub-class of "),s("code",[t._v("Uint8Array")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"this-warn-warning-string-rollupwarning-position-number-column-number-line-number-void"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#this-warn-warning-string-rollupwarning-position-number-column-number-line-number-void"}},[t._v("#")]),t._v(" "),s("code",[t._v("this.warn(warning: string | RollupWarning, position?: number | { column: number; line: number }) => void")])]),t._v(" "),s("p",[t._v("Using this method will queue warnings for a build. These warnings will be printed by the CLI just like internally generated warnings (except with the plugin name), or captured by custom "),s("code",[t._v("onwarn")]),t._v(" handlers.")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("warning")]),t._v(" argument can be a "),s("code",[t._v("string")]),t._v(" or an object with (at minimum) a "),s("code",[t._v("message")]),t._v(" property:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hmm...'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// is equivalent to")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hmm...'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("Use the second form if you need to add additional properties to your warning object. Rollup will augment the warning object with a "),s("code",[t._v("plugin")]),t._v(" property containing the plugin name, "),s("code",[t._v("code")]),t._v(" ("),s("code",[t._v("PLUGIN_WARNING")]),t._v(") and "),s("code",[t._v("id")]),t._v(" (the file being transformed) properties.")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("position")]),t._v(" argument is a character index where the warning was raised. If present, Rollup will augment the warning object with "),s("code",[t._v("pos")]),t._v(", "),s("code",[t._v("loc")]),t._v(" (a standard "),s("code",[t._v("{ file, line, column }")]),t._v(" object) and "),s("code",[t._v("frame")]),t._v(" (a snippet of code showing the error).")]),t._v(" "),s("h2",{attrs:{id:"deprecated-context-functions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deprecated-context-functions"}},[t._v("#")]),t._v(" Deprecated Context Functions")]),t._v(" "),s("p",[t._v("☢️ These context utility functions have been deprecated and may be removed in a future Rollup version.")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("this.emitAsset(assetName: string, source: string) => string")]),t._v(" - "),s("strong",[s("em",[t._v("Use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisemitfileemittedfile-emittedchunk--emittedasset--string",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.emitFile")]),s("OutboundLink")],1)])]),t._v(" - Emits a custom file that is included in the build output, returning a "),s("code",[t._v("referenceId")]),t._v(" that can be used to reference the emitted file. You can defer setting the source if you provide it later via "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thissetassetsourcereferenceid-string-source-string--uint8array--void",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.setAssetSource(referenceId, source)")]),s("OutboundLink")],1),t._v(". A string or "),s("code",[t._v("Uint8Array")]),t._v("/"),s("code",[t._v("Buffer")]),t._v(" source must be set for each asset through either method or an error will be thrown on generate completion.")]),t._v(" "),s("p",[t._v("Emitted assets will follow the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputassetfilenames",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("output.assetFileNames")]),s("OutboundLink")],1),t._v(" naming scheme. You can reference the URL of the file in any code returned by a "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#load",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("load")]),s("OutboundLink")],1),t._v(" or "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#transform",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("transform")]),s("OutboundLink")],1),t._v(" plugin hook via "),s("code",[t._v("import.meta.ROLLUP_ASSET_URL_referenceId")]),t._v(".")]),t._v(" "),s("p",[t._v("The generated code that replaces "),s("code",[t._v("import.meta.ROLLUP_ASSET_URL_referenceId")]),t._v(" can be customized via the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolvefileurl",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveFileUrl")]),s("OutboundLink")],1),t._v(" plugin hook. Once the asset has been finalized during "),s("code",[t._v("generate")]),t._v(", you can also use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisgetfilenamereferenceid-string--string",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.getFileName(referenceId)")]),s("OutboundLink")],1),t._v(" to determine the file name.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("this.emitChunk(moduleId: string, options?: {name?: string}) => string")]),t._v(" - "),s("strong",[s("em",[t._v("Use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisemitfileemittedfile-emittedchunk--emittedasset--string",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.emitFile")]),s("OutboundLink")],1)])]),t._v(" - Emits a new chunk with the given module as entry point. This will not result in duplicate modules in the graph, instead if necessary, existing chunks will be split. It returns a "),s("code",[t._v("referenceId")]),t._v(" that can be used to later access the generated file name of the chunk.")]),t._v(" "),s("p",[t._v("Emitted chunks will follow the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputchunkfilenames",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("output.chunkFileNames")]),s("OutboundLink")],1),t._v(", "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#outputentryfilenames",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("output.entryFileNames")]),s("OutboundLink")],1),t._v(" naming scheme. If a "),s("code",[t._v("name")]),t._v(" is provided, this will be used for the "),s("code",[t._v("[name]")]),t._v(" file name placeholder, otherwise the name will be derived from the file name. If a "),s("code",[t._v("name")]),t._v(" is provided, this name must not conflict with any other entry point names unless the entry points reference the same entry module. You can reference the URL of the emitted chunk in any code returned by a "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#load",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("load")]),s("OutboundLink")],1),t._v(" or "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#transform",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("transform")]),s("OutboundLink")],1),t._v(" plugin hook via "),s("code",[t._v("import.meta.ROLLUP_CHUNK_URL_referenceId")]),t._v(".")]),t._v(" "),s("p",[t._v("The generated code that replaces "),s("code",[t._v("import.meta.ROLLUP_CHUNK_URL_referenceId")]),t._v(" can be customized via the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolvefileurl",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveFileUrl")]),s("OutboundLink")],1),t._v(" plugin hook. Once the chunk has been rendered during "),s("code",[t._v("generate")]),t._v(", you can also use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisgetfilenamereferenceid-string--string",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.getFileName(referenceId)")]),s("OutboundLink")],1),t._v(" to determine the file name.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("this.getAssetFileName(referenceId: string) => string")]),t._v(" - "),s("strong",[s("em",[t._v("Use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisgetfilenamereferenceid-string--string",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.getFileName")]),s("OutboundLink")],1)])]),t._v(" - Get the file name of an asset, according to the "),s("code",[t._v("assetFileNames")]),t._v(" output option pattern. The file name will be relative to "),s("code",[t._v("outputOptions.dir")]),t._v(".")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("this.getChunkFileName(referenceId: string) => string")]),t._v(" - "),s("strong",[s("em",[t._v("Use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisgetfilenamereferenceid-string--string",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.getFileName")]),s("OutboundLink")],1)])]),t._v(" - Get the file name of an emitted chunk. The file name will be relative to "),s("code",[t._v("outputOptions.dir")]),t._v(".")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("this.isExternal(id: string, importer: string | undefined, isResolved: boolean) => boolean")]),t._v(" - "),s("strong",[s("em",[t._v("Use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisresolvesource-string-importer-string-options-skipself-boolean-custom-plugin-string-any--promiseid-string-external-boolean-modulesideeffects-boolean--no-treeshake-syntheticnamedexports-boolean--string-meta-plugin-string-any--null",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.resolve")]),s("OutboundLink")],1)])]),t._v(" - Determine if a given module ID is external when imported by "),s("code",[t._v("importer")]),t._v(". When "),s("code",[t._v("isResolved")]),t._v(" is false, Rollup will try to resolve the id before testing if it is external.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("this.moduleIds: IterableIterator<string>")]),t._v(" - "),s("strong",[s("em",[t._v("Use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisgetmoduleids--iterableiteratorstring",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.getModuleIds")]),s("OutboundLink")],1)])]),t._v(" - An "),s("code",[t._v("Iterator")]),t._v(" that gives access to all module ids in the current graph. It can be iterated via")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" moduleId "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("moduleIds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("or converted into an Array via "),s("code",[t._v("Array.from(this.moduleIds)")]),t._v(".")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("this.resolveId(source: string, importer?: string) => Promise<string | null>")]),t._v(" - "),s("strong",[s("em",[t._v("Use "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#thisresolvesource-string-importer-string-options-skipself-boolean-custom-plugin-string-any--promiseid-string-external-boolean-modulesideeffects-boolean--no-treeshake-syntheticnamedexports-boolean--string-meta-plugin-string-any--null",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("this.resolve")]),s("OutboundLink")],1)])]),t._v(" - Resolve imports to module ids (i.e. file names) using the same plugins that Rollup uses. Returns "),s("code",[t._v("null")]),t._v(" if an id cannot be resolved.")])])]),t._v(" "),s("h2",{attrs:{id:"file-urls"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#file-urls"}},[t._v("#")]),t._v(" File URLs")]),t._v(" "),s("p",[t._v("To reference a file URL reference from within JS code, use the "),s("code",[t._v("import.meta.ROLLUP_FILE_URL_referenceId")]),t._v(" replacement. This will generate code that depends on the output format and generates a URL that points to the emitted file in the target environment. Note that all formats except CommonJS and UMD assume that they run in a browser environment where "),s("code",[t._v("URL")]),t._v(" and "),s("code",[t._v("document")]),t._v(" are available.")]),t._v(" "),s("p",[t._v("The following example will detect imports of "),s("code",[t._v(".svg")]),t._v(" files, emit the imported files as assets, and return their URLs to be used e.g. as the "),s("code",[t._v("src")]),t._v(" attribute of an "),s("code",[t._v("img")]),t._v(" tag:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugin")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("svgResolverPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" importer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("endsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.svg'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dirname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("importer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("endsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.svg'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" referenceId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emitFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'asset'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("basename")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          source"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("export default import.meta.ROLLUP_FILE_URL_")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("referenceId"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("p",[t._v("Usage:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" logo "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../images/logo.svg'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" image "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'img'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nimage"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" logo\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("Similar to assets, emitted chunks can be referenced from within JS code via "),s("code",[t._v("import.meta.ROLLUP_FILE_URL_referenceId")]),t._v(" as well.")]),t._v(" "),s("p",[t._v("The following example will detect imports prefixed with "),s("code",[t._v("register-paint-worklet:")]),t._v(" and generate the necessary code and separate chunk to generate a CSS paint worklet. Note that this will only work in modern browsers and will only work if the output format is set to "),s("code",[t._v("es")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plugin")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REGISTER_WORKLET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'register-paint-worklet:'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("paintWorkletPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("load")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REGISTER_WORKLET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("CSS.paintWorklet.addModule(import.meta.ROLLUP_FILE_URL_")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("emitFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chunk'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REGISTER_WORKLET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(");")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" importer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// We remove the prefix, resolve everything to absolute ids and add the prefix again")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// This makes sure that you can use relative imports to define worklets")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REGISTER_WORKLET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REGISTER_WORKLET")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          importer\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolvedId")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REGISTER_WORKLET")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" resolvedId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br")])]),s("p",[t._v("Usage:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// main.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'register-paint-worklet:./worklet.js'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./config.js'")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('<h1 style="background-image: paint(vertical-lines);">color: ')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("color"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(", size: ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("size"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("</h1>")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// worklet.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./config.js'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerPaint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vertical-lines'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("paint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" geom")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" geom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("width "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" x"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beginPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fillStyle "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" color\n        ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" size"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" geom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fill")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// config.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" color "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'greenyellow'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" size "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br")])]),s("p",[t._v("If you build this code, both the main chunk and the worklet will share the code from "),s("code",[t._v("config.js")]),t._v(" via a shared chunk. This enables us to make use of the browser cache to reduce transmitted data and speed up loading the worklet.")]),t._v(" "),s("h2",{attrs:{id:"transformers"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transformers"}},[t._v("#")]),t._v(" Transformers")]),t._v(" "),s("p",[t._v("Transformer plugins (i.e. those that return a "),s("code",[t._v("transform")]),t._v(" function for e.g. transpiling non-JS files) should support "),s("code",[t._v("options.include")]),t._v(" and "),s("code",[t._v("options.exclude")]),t._v(", both of which can be a minimatch pattern or an array of minimatch patterns. If "),s("code",[t._v("options.include")]),t._v(" is omitted or of zero length, files should be included by default; otherwise they should only be included if the ID matches one of the patterns.")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("transform")]),t._v(" hook, if returning an object, can also include an "),s("code",[t._v("ast")]),t._v(" property. Only use this feature if you know what you're doing. Note that only the last AST in a chain of transforms will be used (and if there are transforms, any ASTs generated by the "),s("code",[t._v("load")]),t._v(" hook will be discarded for the transformed modules.)")]),t._v(" "),s("h3",{attrs:{id:"example-transformer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-transformer"}},[t._v("#")]),t._v(" Example Transformer")]),t._v(" "),s("p",[t._v("(Use "),s("a",{attrs:{href:"https://github.com/rollup/plugins/tree/master/packages/pluginutils",target:"_blank",rel:"noopener noreferrer"}},[t._v("@rollup/pluginutils"),s("OutboundLink")],1),t._v(" for commonly needed functions, and to implement a transformer in the recommended manner.)")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createFilter "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@rollup/pluginutils'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("myPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" filter "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createFilter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("include"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exclude"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// proceed with the transformation...")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" generatedCode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        map"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" generatedSourceMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br")])]),s("h3",{attrs:{id:"source-code-transformations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#source-code-transformations"}},[t._v("#")]),t._v(" Source Code Transformations")]),t._v(" "),s("p",[t._v("If a plugin transforms source code, it should generate a sourcemap automatically, unless there's a specific "),s("code",[t._v("sourceMap: false")]),t._v(" option. Rollup only cares about the "),s("code",[t._v("mappings")]),t._v(" property (everything else is handled automatically). If it doesn't make sense to generate a sourcemap, (e.g. "),s("a",{attrs:{href:"https://github.com/TrySound/rollup-plugin-string",target:"_blank",rel:"noopener noreferrer"}},[t._v("rollup-plugin-string"),s("OutboundLink")],1),t._v("), return an empty sourcemap:")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" transformedCode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  map"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mappings"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("If the transformation does not move code, you can preserve existing sourcemaps by returning "),s("code",[t._v("null")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  code"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" transformedCode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  map"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("If you create a plugin that you think would be useful to others, please publish it to NPM and add submit it to "),s("a",{attrs:{href:"https://github.com/rollup/awesome",target:"_blank",rel:"noopener noreferrer"}},[t._v("github.com/rollup/awesome"),s("OutboundLink")],1),t._v("!")]),t._v(" "),s("h2",{attrs:{id:"synthetic-named-exports"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#synthetic-named-exports"}},[t._v("#")]),t._v(" Synthetic named exports")]),t._v(" "),s("p",[t._v("It is possible to designate a fallback export for missing exports by setting the "),s("code",[t._v("syntheticNamedExports")]),t._v(" option for a module in the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolveid",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveId")]),s("OutboundLink")],1),t._v(", "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#load",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("load")]),s("OutboundLink")],1),t._v(" or "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#transform",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("transform")]),s("OutboundLink")],1),t._v(" hook. If a string value is used for "),s("code",[t._v("syntheticNamedExports")]),t._v(", this module will fallback the resolution of any missing named exports to properties of the named export of the given name:")]),t._v(" "),s("p",[s("strong",[t._v("dep.js: ("),s("code",[t._v("{syntheticNamedExports: '__synthetic'}")]),t._v(")")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" foo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'explicit'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" __synthetic "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  bar"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bar'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[s("strong",[t._v("main.js:")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" baz"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __synthetic "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./dep.js'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// logs "explicit" as non-synthetic exports take precedence')]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// logs "bar", picking the property from __synthetic')]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bar"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// logs "undefined"')]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("baz"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// logs \"{foo:'foo',bar:'bar'}\"")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__synthetic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[t._v("When used as an entry point, only explicit exports will be exposed. The synthetic fallback export, i.e. "),s("code",[t._v("__synthetic")]),t._v(" in the example, will not be exposed for string values of "),s("code",[t._v("syntheticNamedExports")]),t._v(". However if the value is "),s("code",[t._v("true")]),t._v(", the default export will be exposed. This is the only notable difference between "),s("code",[t._v("syntheticNamedExports: true")]),t._v(" and "),s("code",[t._v("syntheticNamedExports: 'default'")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"inter-plugin-communication"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#inter-plugin-communication"}},[t._v("#")]),t._v(" Inter-plugin communication")]),t._v(" "),s("p",[t._v("At some point when using many dedicated plugins, there may be the need for unrelated plugins to be able to exchange information during the build. There are several mechanisms through which Rollup makes this possible.")]),t._v(" "),s("h3",{attrs:{id:"custom-resolver-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-resolver-options"}},[t._v("#")]),t._v(" Custom resolver options")]),t._v(" "),s("p",[t._v("Assume you have a plugin that should resolve a module to different ids depending on how it is imported. One way to achieve this would be to use special proxy ids when importing this module, e.g. a transpiled import via "),s("code",[t._v('require("foo")')]),t._v(" could be denoted with an id "),s("code",[t._v("foo?require=true")]),t._v(" so that a resolver plugin knows this.")]),t._v(" "),s("p",[t._v("The problem here, however, is that this proxy id may or may not cause unintended side-effects when passed to other resolvers. Moreover, if the id is created by plugin "),s("code",[t._v("A")]),t._v(" and the resolution happens in plugin "),s("code",[t._v("B")]),t._v(", it creates a dependency between these plugins so that one "),s("code",[t._v("A")]),t._v(" is not usable without "),s("code",[t._v("B")]),t._v(".")]),t._v(" "),s("p",[t._v("Custom resolver option offer a solution here by allowing to pass additional options for plugins when manually resolving a module. This happens without changing the id and thus without impairing the ability for other plugins to resolve the module correctly if the intended target plugin is not present.")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestingPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'requesting'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildStart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" resolution "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'foo'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        custom"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" resolving"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" specialResolution"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolution"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "special"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolvingPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'resolving'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" importer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" custom "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("custom"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("resolving"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("specialResolution"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'special'")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br")])]),s("p",[t._v("Note the convention that custom options should be added using a property corresponding to the plugin name of the resolving plugin. It is responsibility of the resolving plugin to specify which options it respects.")]),t._v(" "),s("h3",{attrs:{id:"custom-module-meta-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#custom-module-meta-data"}},[t._v("#")]),t._v(" Custom module meta-data")]),t._v(" "),s("p",[t._v("Plugins can annotate modules with custom meta-data which can be accessed by themselves and other plugins via the "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#resolveid",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("resolveId")]),s("OutboundLink")],1),t._v(", "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#load",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("load")]),s("OutboundLink")],1),t._v(", and "),s("a",{attrs:{href:"https://rollupjs.org/guide/en/#transform",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("transform")]),s("OutboundLink")],1),t._v(" hooks. This meta-data should always be JSON.stringifyable and will be persisted in the cache e.g. in watch mode.")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("annotatingPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'annotating'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("thisModuleIsSpecial")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" meta"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" annotating"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" special"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readingPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" parentApi\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'reading'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildEnd")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" specialModules "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("from")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getModuleIds")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("filter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("id")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getModuleInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotating"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?.")]),t._v("special\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do something with this list")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br")])]),s("p",[t._v("Note the convention that plugins that add or modify data should use a property corresponding to the plugin name, in this case "),s("code",[t._v("annotating")]),t._v(". On the other hand, any plugin can read all meta-data from other plugins via "),s("code",[t._v("this.getModuleInfo")]),t._v(".")]),t._v(" "),s("p",[t._v("If several plugins add meta-data or meta-data is added in different hooks, then these "),s("code",[t._v("meta")]),t._v(" objects will be merged shallowly. That means if plugin "),s("code",[t._v("first")]),t._v(" adds "),s("code",[t._v('{meta: {first: {resolved: "first"}}}')]),t._v(" in the resolveId hook and "),s("code",[t._v('{meta: {first: {loaded: "first"}}}')]),t._v(" in the load hook while plugin "),s("code",[t._v("second")]),t._v(" adds "),s("code",[t._v('{meta: {second: {transformed: "second"}}}')]),t._v(" in the "),s("code",[t._v("transform")]),t._v(" hook, then the resulting "),s("code",[t._v("meta")]),t._v(" object will be "),s("code",[t._v('{first: {loaded: "first"}, second: {transformed: "second"}}')]),t._v(". Here the result of the "),s("code",[t._v("resolveId")]),t._v(" hook will be overwritten by the result of the "),s("code",[t._v("load")]),t._v(" hook as the plugin was both storing them under its "),s("code",[t._v("first")]),t._v(" top-level property. The "),s("code",[t._v("transform")]),t._v(" data of the other plugin on the other hand will be placed next to it.")]),t._v(" "),s("h3",{attrs:{id:"direct-plugin-communication"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#direct-plugin-communication"}},[t._v("#")]),t._v(" Direct plugin communication")]),t._v(" "),s("p",[t._v("For any other kind of inter-plugin communication, we recommend the pattern below. Note that "),s("code",[t._v("api")]),t._v(" will never conflict with any upcoming plugin hooks.")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parentPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'parent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    api"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...methods and properties exposed for other plugins")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do something interesting")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...plugin hooks")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dependentPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" parentApi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dependent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildStart")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" plugins "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parentName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'parent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parentPlugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plugins\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("plugin")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" plugin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" parentName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("parentPlugin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// or handle this silently if it is optional")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Error")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('This plugin depends on the "')]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("parentName"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" plugin.')]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// now you can access the API methods in subsequent hooks")]),t._v("\n      parentApi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parentPlugin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("thereIsAReasonToDoSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        parentApi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("doSomething")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br")])])])}),[],!1,null,null,null);e.default=a.exports}}]);